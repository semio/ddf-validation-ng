var gi=function(n){return function(r){for(var t=n.length,e=r.length,a=new Array(t*e),u=0,i=0;i<t;i++)for(var f=n[i],l=0;l<e;l++)a[u++]=f(r[l]);return a}};var va={compose:function(n){return function(r){return function(t){return n(r(t))}}}};var tn=function(n){return n.identity},an={identity:function(n){return n},Semigroupoid0:function(){return va}};var gn=!0;var cn=function(n){return function(r){return function(t){return n(t)(r)}}},sn=function(n){return function(r){return n}};var bi=function(n){return function(r){for(var t=r.length,e=new Array(t),a=0;a<t;a++)e[a]=n(r[a]);return e}};var En=function(){function n(){}return n.value=new n,n}();var v=function(n){return n.map},zt=function(n){var r=v(n);return function(t){return function(e){return r(e)(t)}}},Dn=function(n){return v(n)(sn(void 0))};var Cn={map:bi};var W_=tn(an);var Da={apply:gi,Functor0:function(){return Cn}},Q=function(n){return n.apply},Ce=function(n){var r=Q(n),t=v(n.Functor0());return function(e){return function(a){return r(t(sn)(e))(a)}}},Et=function(n){var r=Q(n),t=v(n.Functor0());return function(e){return function(a){return r(t(sn(W_))(e))(a)}}};var h=function(n){return n.pure};var Ct=function(n){var r=h(n);return function(t){return function(e){if(t)return e;if(!t)return r(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[t.constructor.name,e.constructor.name])}}},Te=function(n){var r=Q(n.Apply0()),t=h(n);return function(e){return function(a){return r(t(e))(a)}}};var Ei=function(n){return function(r){for(var t=[],e=0,a=n.length;e<a;e++)Array.prototype.push.apply(t,r(n[e]));return t}};var z_=tn(an),at=function(n){return n.discard};var ya={bind:Ei,Apply0:function(){return Da}},S=function(n){return n.bind};var ot={discard:function(n){return S(n)}};var ha=function(n){var r=S(n);return function(t){return r(t)(z_)}};var Dr=function(n){return n.lift};var ut=function(n){return function(r){for(var t=n>r?-1:1,e=new Array(t*(r-n)+1),a=n,u=0;a!==r;)e[u++]=a,a+=t;return e[u]=a,e}},J_=function(n){return function(r){if(n<1)return[];var t=new Array(n);return t.fill(r)}},G_=function(n){return function(r){for(var t=[],e=0,a=0;a<n;a++)t[e++]=r;return t}},Ci=typeof Array.prototype.fill=="function"?J_:G_,Ti=function(){function n(a,u){this.head=a,this.tail=u}var r={};function t(a){return function(u){return new n(a,u)}}function e(a){for(var u=[],i=0,f=a;f!==r;)u[i++]=f.head,f=f.tail;return u}return function(a){return function(u){return e(a(t)(r)(u))}}}(),Ln=function(n){return n.length},ho=function(n){return function(r){return function(t){return t.length===0?n({}):r(t[0])(t.slice(1))}}},Fi=function(n){return function(r){return function(t){return function(e){return e<0||e>=t.length?r:n(t[e])}}}};var Si=function(n){return function(r){return function(t){return function(e){for(var a=0,u=e.length;a<u;a++)if(t(e[a]))return n(a);return r}}}};var Tt=function(n){if(n.length<=1e4)return Array.prototype.concat.apply([],n);for(var r=[],t=0,e=n.length;t<e;t++)for(var a=n[t],u=0,i=a.length;u<i;u++)r.push(a[u]);return r},fr=function(n){return function(r){return r.filter(n)}};var k_=function(){function n(r,t,e,a,u,i){var f,l,c,_,p,y,d;for(f=u+(i-u>>1),f-u>1&&n(r,t,a,e,u,f),i-f>1&&n(r,t,a,e,f,i),l=u,c=f,_=u;l<f&&c<i;)p=a[l],y=a[c],d=t(r(p)(y)),d>0?(e[_++]=y,++c):(e[_++]=p,++l);for(;l<f;)e[_++]=a[l++];for(;c<i;)e[_++]=a[c++]}return function(r){return function(t){return function(e){var a;return e.length<2?e:(a=e.slice(0),n(r,t,a,e.slice(0),0,e.length),a)}}}}();var ba=function(n){return function(r){return function(t){for(var e=r.length<t.length?r.length:t.length,a=new Array(e),u=0;u<e;u++)a[u]=n(r[u])(t[u]);return a}}};var Mi=function(n){return function(r){return n+r}},Ii=function(n){return function(r){return n.length===0?r:r.length===0?n:n.concat(r)}};var kn=function(n){return n.reflectSymbol};var yr=function(n){return function(r){return r[n]}};var go={append:Mi};var _n={append:Ii};var I=function(n){return n.append};var hn=function(n){return n.alt};var it=function(n){var r=S(n.Bind1()),t=h(n.Applicative0());return function(e){return function(a){return r(e)(function(u){return r(a)(function(i){return t(u(i))})})}}};var xi=String.fromCharCode(65535),Ni=String.fromCharCode(0),K_=Number.POSITIVE_INFINITY,Y_=Number.NEGATIVE_INFINITY;var bo=function(n){return function(r){return function(t){return function(e){return function(a){return e<a?n:e===a?r:t}}}}};var $i=bo;var qi=bo,Oi=bo;var wo=function(n){return function(r){return n===r}};var Pi=wo;var Ri=wo,Wi=wo;var hr={eq:Wi};var ct={eq:Pi},Se={eq:Ri};var O=function(n){return n.eq};var U=function(){function n(){}return n.value=new n,n}(),k=function(){function n(){}return n.value=new n,n}(),j=function(){function n(){}return n.value=new n,n}();var Bi=function(n){return function(r){return n-r|0}};var Ui=function(n){return function(r){return n+r|0}},zi=function(n){return function(r){return n*r|0}};var wa={add:Ui,zero:0,mul:zi,one:1};var Ji={sub:Bi,Semiring0:function(){return wa}};var Gt=function(){return{compare:qi(U.value)(j.value)(k.value),Eq0:function(){return hr}}}();var br=function(){return{compare:$i(U.value)(j.value)(k.value),Eq0:function(){return ct}}}(),Ca=function(){return{compare:Oi(U.value)(j.value)(k.value),Eq0:function(){return Se}}}();var P=function(n){return n.compare};var Kn=function(n){return n.top};var Ft={top:xi,bottom:Ni,Ord0:function(){return Ca}};var jn=function(n){return n.bottom};var ji=function(n){return n.toString()};var Vi=function(n){var r=n.charCodeAt(0);if(r<32||r===127){switch(n){case"\x07":return"'\\a'";case"\b":return"'\\b'";case"\f":return"'\\f'";case`
`:return"'\\n'";case"\r":return"'\\r'";case"	":return"'\\t'";case"\v":return"'\\v'"}return"'\\"+r.toString(10)+"'"}return n==="'"||n==="\\"?"'\\"+n+"'":"'"+n+"'"},Qi=function(n){var r=n.length;return'"'+n.replace(/[\0-\x1F\x7F"\\]/g,function(t,e){switch(t){case'"':case"\\":return"\\"+t;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var a=e+1,u=a<r&&n[a]>="0"&&n[a]<="9"?"\\&":"";return"\\"+t.charCodeAt(0).toString(10)+u})+'"'},Hi=function(n){return function(r){for(var t=[],e=0,a=r.length;e<a;e++)t[e]=n(r[e]);return"["+t.join(",")+"]"}};var Vn={show:Qi};var Ki=function(n){return n.showRecordFields},Ie=function(){return function(){return function(n){var r=Ki(n);return{show:function(t){return"{"+(r(En.value)(t)+"}")}}}}};var Un={show:ji},To={show:Vi};var g=function(n){return n.show},st=function(n){return{show:Hi(g(n))}},St=function(n){var r=kn(n);return function(t){var e=Ki(t);return function(a){var u=g(a);return{showRecordFields:function(i){return function(f){var l=e(En.value)(f),c=r(En.value),_=yr(c)(f);return" "+(c+(": "+(u(_)+(","+l))))}}}}}},Le=function(n){var r=kn(n);return function(t){var e=g(t);return{showRecordFields:function(a){return function(u){var i=r(En.value),f=yr(i)(u);return" "+(i+(": "+(e(f)+" ")))}}}}};var D=function(){function n(){}return n.value=new n,n}(),m=function(){function n(r){this.value0=r}return n.create=function(r){return new n(r)},n}();var Fn=function(n){return function(r){return function(t){if(t instanceof D)return n;if(t instanceof m)return r(t.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[n.constructor.name,r.constructor.name,t.constructor.name])}}},Rr=Fn(!0)(sn(!1)),xe=Fn(!1)(sn(!0));var on={map:function(n){return function(r){return r instanceof m?new m(n(r.value0)):D.value}}},mp=v(on);var zn=function(){return function(n){if(n instanceof m)return n.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[n.constructor.name])}};var _t={apply:function(n){return function(r){if(n instanceof m)return mp(n.value0)(r);if(n instanceof D)return D.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[n.constructor.name,r.constructor.name])}},Functor0:function(){return on}};var wr={bind:function(n){return function(r){if(n instanceof m)return r(n.value0);if(n instanceof D)return D.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[n.constructor.name,r.constructor.name])}},Apply0:function(){return _t}};var b=function(){function n(r){this.value0=r}return n.create=function(r){return new n(r)},n}(),F=function(){function n(r){this.value0=r}return n.create=function(r){return new n(r)},n}();var Er={map:function(n){return function(r){if(r instanceof b)return new b(r.value0);if(r instanceof F)return new F(n(r.value0));throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): "+[r.constructor.name])}}},vp=v(Er);var jt=function(n){return function(r){return function(t){if(t instanceof b)return n(t.value0);if(t instanceof F)return r(t.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[n.constructor.name,r.constructor.name,t.constructor.name])}}};var Zi={apply:function(n){return function(r){if(n instanceof b)return new b(n.value0);if(n instanceof F)return vp(n.value0)(r);throw new Error("Failed pattern match at Data.Either (line 70, column 1 - line 72, column 30): "+[n.constructor.name,r.constructor.name])}},Functor0:function(){return Er}};var Fo={bind:jt(function(n){return function(r){return new b(n)}})(function(n){return function(r){return r(n)}}),Apply0:function(){return Zi}};var Fa=function(){return{pure:F.create,Apply0:function(){return Zi}}}(),So={Applicative0:function(){return Fa},Bind1:function(){return Fo}};var nf=function(n){return Math.min(Math.abs(n),2147483647)},rf=function(n){return function(r){return r===0?0:r>0?Math.floor(n/r):-Math.floor(n/-r)}},tf=function(n){return function(r){if(r===0)return 0;var t=Math.abs(r);return(n%t+t)%t}};var ef={Ring0:function(){return Ji}};var Ne=function(n){return n.mod};var Qt={degree:nf,div:rf,mod:tf,CommutativeRing0:function(){return ef}},$e=function(n){return n.div};var Ht={mempty:[],Semigroup0:function(){return _n}};var pn=function(n){return n.mempty};var of=function(n){return function(){return n}},uf=function(n){return function(r){return function(){return r(n())()}}};var ff=function(n,r,t){var e=0,a;return function(u){if(e===2)return a;if(e===1)throw new ReferenceError(n+" was needed before it finished initializing (module "+r+", line "+u+")",r,u);return e=1,a=t(),e=2,a}},Pn={Applicative0:function(){return Wr},Bind1:function(){return cf}},cf={bind:uf,Apply0:function(){return sf(0)}},Wr={pure:of,Apply0:function(){return sf(0)}},lf=ff("functorEffect","Effect",function(){return{map:Te(Wr)}}),sf=ff("applyEffect","Effect",function(){return{apply:it(Pn),Functor0:function(){return lf(0)}}}),lr=lf(20);var xn=function(){function n(r){this.value0=r}return n.create=function(r){return new n(r)},n}(),In=function(){function n(r){this.value0=r}return n.create=function(r){return new n(r)},n}(),Mt=function(n){return n.tailRecM};var Sp=function(n){var r=function(t){var e=!1,a;function u(i){if(i instanceof xn){t=n(i.value0);return}if(i instanceof In)return e=!0,i.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 103, column 3 - line 103, column 25): "+[i.constructor.name])}for(;!e;)a=u(t);return a};return function(t){return r(n(t))}};var _f={tailRecM:function(n){return function(r){var t=function(e){if(e instanceof b)return new In(new b(e.value0));if(e instanceof F&&e.value0 instanceof xn)return new xn(n(e.value0.value0));if(e instanceof F&&e.value0 instanceof In)return new In(new F(e.value0.value0));throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 145, column 7 - line 145, column 33): "+[e.constructor.name])};return Sp(t)(n(r))}},Monad0:function(){return So}};var pf={bimap:function(n){return function(r){return function(t){if(t instanceof xn)return new xn(n(t.value0));if(t instanceof In)return new In(r(t.value0));throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 33, column 1 - line 35, column 34): "+[n.constructor.name,r.constructor.name,t.constructor.name])}}}};var Ap=function(){function n(r,t,e,a,u,i){var f,l,c,_,p,y,d;for(f=u+(i-u>>1),f-u>1&&n(r,t,a,e,u,f),i-f>1&&n(r,t,a,e,f,i),l=u,c=f,_=u;l<f&&c<i;)p=a[l],y=a[c],d=t(r(p)(y)),d>0?(e[_++]=y,++c):(e[_++]=p,++l);for(;l<f;)e[_++]=a[l++];for(;c<i;)e[_++]=a[c++]}return function(r){return function(t){return function(e){return function(){return e.length<2||n(r,t,e,e.slice(0),0,e.length),e}}}}}();var bf=function(n){return function(r){return n&&r}},wf=function(n){return function(r){return n||r}},Ef=function(n){return!n};var Sa=function(n){return n.not};var Pe=function(n){return n.ff};var Kt=function(n){return n.disj},mt={ff:!1,tt:!0,implies:function(n){return function(r){return Kt(mt)(Sa(mt)(n))(r)}},conj:bf,disj:wf,not:Ef};var Ff=function(n){return function(r){return function(t){for(var e=r,a=t.length,u=a-1;u>=0;u--)e=n(t[u])(e);return e}}},Sf=function(n){return function(r){return function(t){for(var e=r,a=t.length,u=0;u<a;u++)e=n(e)(t[u]);return e}}};var W=function(){function n(r,t){this.value0=r,this.value1=t}return n.create=function(r){return function(t){return new n(r,t)}},n}();var Rn=function(n){return n.value1};var er=function(n){return n.value0};var Yt=function(n){return n.bimap};var xa=function(n){return n};var Zp=function(n){var r=Kt(n);return{append:function(t){return function(e){return r(t)(e)}}}};var Po=function(n){var r=Zp(n);return{mempty:Pe(n),Semigroup0:function(){return r}}};var Tr=function(n){return n};var Be=function(){return Tr};var Lf=Be();var Fr=function(){return Lf};var Wo=function(){return function(){return function(){return function(){return function(n){return Lf}}}}};var am=Wo()()()(),vn=function(n){return n.foldr};var en=function(n){return n.foldl};var xf=function(n){var r=vn(n);return function(t){var e=I(t.Semigroup0()),a=pn(t);return function(u){return r(function(i){return function(f){return e(u(i))(f)}})(a)}}},Sn={foldr:Ff,foldl:Sf,foldMap:function(n){return xf(Sn)(n)}};var Tn=function(n){return n.foldMap};var Lt=function(n){var r=Tn(n);return function(t){return am(xa)(r(Po(t)))}},At=function(n){var r=Lt(n)(mt);return function(t){var e=O(t);return function(a){return r(e(a))}}};var Nf=function(){function n(a){return[a]}function r(a){return function(u){return[a,u]}}function t(a){return function(u){return function(i){return[a,u,i]}}}function e(a){return function(u){return a.concat(u)}}return function(a){return function(u){return function(i){return function(f){return function(l){function c(_,p){switch(p-_){case 0:return i([]);case 1:return u(n)(f(l[_]));case 2:return a(u(r)(f(l[_])))(f(l[_+1]));case 3:return a(a(u(t)(f(l[_])))(f(l[_+1])))(f(l[_+2]));default:var y=_+Math.floor((p-_)/4)*2;return a(u(e)(c(_,y)))(c(y,p))}}return c(0,l.length)}}}}}}();var zm=tn(an),Jn=function(n){return n.traverse};var Jm=function(n){var r=Jn(n);return function(t){return r(t)(zm)}},Xn={traverse:function(n){var r=n.Apply0();return Nf(Q(r))(v(r.Functor0()))(h(n))},sequence:function(n){return Jm(Xn)(n)},Functor0:function(){return Cn},Foldable1:function(){return Sn}},zr=function(n){return n.sequence};var ko=function(n){return function(r){var t=Jn(r)(n);return function(e){return function(a){return t(a)(e)}}}};var Gf=function(n){return function(r){return function(t){return function(e){return function(a){return function(u){for(var i=[],f=u;;){var l=a(f);if(n(l))return i;var c=r(l);i.push(t(c)),f=e(c)}}}}}}};var kf=function(n){return function(r){return function(t){return function(e){return function(a){return function(u){for(var i=[],f=u;;){var l=a(f);i.push(t(l));var c=e(l);if(n(c))return i;f=r(c)}}}}}}};var Zm=zn();var jo={unfoldr1:kf(Rr)(Zm)(er)(Rn)};var rv=zn(),Jr=function(n){return n.unfoldr};var ke={unfoldr:Gf(Rr)(rv)(er)(Rn),Unfoldable10:function(){return jo}};var iv=Jn(Xn);var Gr=function(){return ba(W.create)}();var Ho=function(){return ho(sn(D.value))(function(n){return function(r){return new m(r)}})}();var Kf=function(n){return[n]};var je=function(){return Fi(m.create)(D.value)}();var Ko=function(n){return je(n)(0)};var ee=function(n){return Ti(vn(n))},Yf=vn(Sn);var Ve=function(n){var r=h(n.Applicative0()),t=S(n.Bind1());return function(e){return function(a){return ho(function(u){return r(a)})(function(u){return function(i){return t(e(a)(u))(function(f){return Ve(n)(e)(f)(i)})}})}}};var Xf=function(){return Si(m.create)(D.value)}();var Zf=function(n){var r=O(n);return function(t){return Xf(function(e){return r(e)(t)})}};var Qe=function(n){var r=Zf(n);return function(t){return function(e){return xe(r(t)(e))}}};var fv=cn(S(ya)),nc=function(n){return fv(function(){var r=Fn([])(Kf);return function(t){return r(n(t))}}())},Yo=function(n){var r=iv(n),t=v(n.Apply0().Functor0());return function(e){var a=t(nc(function(i){return i.value1?new m(i.value0):D.value})),u=r(function(i){return t(W.create(i))(e(i))});return function(i){return a(u(i))}}};var K=class extends Error{constructor(r,t,e,...a){Array.isArray(t)&&(t=t.join(" ")),super(t),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,K),this.code=r;for(let u of a)for(let i in u){let f=u[i];this[i]=Buffer.isBuffer(f)?f.toString(e.encoding):f==null?f:JSON.parse(JSON.stringify(f))}}};var rc=function(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)};var Wa=function(n){let r=[];for(let t=0,e=n.length;t<e;t++){let a=n[t];if(a==null||a===!1)r[t]={disabled:!0};else if(typeof a=="string")r[t]={name:a};else if(rc(a)){if(typeof a.name!="string")throw new K("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${t}`,"when column is an object literal"]);r[t]=a}else throw new K("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(a)} at position ${t}`])}return r};var Xo=class{constructor(r=100){this.size=r,this.length=0,this.buf=Buffer.allocUnsafe(r)}prepend(r){if(Buffer.isBuffer(r)){let t=this.length+r.length;if(t>=this.size&&(this.resize(),t>=this.size))throw Error("INVALID_BUFFER_STATE");let e=this.buf;this.buf=Buffer.allocUnsafe(this.size),r.copy(this.buf,0),e.copy(this.buf,r.length),this.length+=r.length}else{let t=this.length++;t===this.size&&this.resize();let e=this.clone();this.buf[0]=r,e.copy(this.buf,1,0,t)}}append(r){let t=this.length++;t===this.size&&this.resize(),this.buf[t]=r}clone(){return Buffer.from(this.buf.slice(0,this.length))}resize(){let r=this.length;this.size=this.size*2;let t=Buffer.allocUnsafe(this.size);this.buf.copy(t,0,0,r),this.buf=t}toString(r){return r?this.buf.slice(0,this.length).toString(r):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}},Zo=Xo;var cv=12,lv=13,sv=10,_v=32,pv=9,tc=function(n){return{bomSkipped:!1,bufBytesStart:0,castField:n.cast_function,commenting:!1,error:void 0,enabled:n.from_line===1,escaping:!1,escapeIsQuote:Buffer.isBuffer(n.escape)&&Buffer.isBuffer(n.quote)&&Buffer.compare(n.escape,n.quote)===0,expectedRecordLength:Array.isArray(n.columns)?n.columns.length:void 0,field:new Zo(20),firstLineToHeaders:n.cast_first_line_to_header,needMoreDataSize:Math.max(n.comment!==null?n.comment.length:0,...n.delimiter.map(r=>r.length),n.quote!==null?n.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new Zo(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:n.record_delimiter.length===0?2:Math.max(...n.record_delimiter.map(r=>r.length)),trimChars:[Buffer.from(" ",n.encoding)[0],Buffer.from("	",n.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[Buffer.from(Buffer.from([lv],"utf8").toString(),n.encoding),Buffer.from(Buffer.from([sv],"utf8").toString(),n.encoding),Buffer.from(Buffer.from([cv],"utf8").toString(),n.encoding),Buffer.from(Buffer.from([_v],"utf8").toString(),n.encoding),Buffer.from(Buffer.from([pv],"utf8").toString(),n.encoding)]}};var ec=function(n){return n.replace(/([A-Z])/g,function(r,t){return"_"+t.toLowerCase()})};var nu=function(n){let r={};for(let e in n)r[ec(e)]=n[e];if(r.encoding===void 0||r.encoding===!0)r.encoding="utf8";else if(r.encoding===null||r.encoding===!1)r.encoding=null;else if(typeof r.encoding!="string"&&r.encoding!==null)throw new K("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(r.encoding)}`],r);if(r.bom===void 0||r.bom===null||r.bom===!1)r.bom=!1;else if(r.bom!==!0)throw new K("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,",`got ${JSON.stringify(r.bom)}`],r);if(r.cast_function=null,r.cast===void 0||r.cast===null||r.cast===!1||r.cast==="")r.cast=void 0;else if(typeof r.cast=="function")r.cast_function=r.cast,r.cast=!0;else if(r.cast!==!0)throw new K("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(r.cast)}`],r);if(r.cast_date===void 0||r.cast_date===null||r.cast_date===!1||r.cast_date==="")r.cast_date=!1;else if(r.cast_date===!0)r.cast_date=function(e){let a=Date.parse(e);return isNaN(a)?e:new Date(a)};else if(typeof r.cast_date!="function")throw new K("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(r.cast_date)}`],r);if(r.cast_first_line_to_header=null,r.columns===!0)r.cast_first_line_to_header=void 0;else if(typeof r.columns=="function")r.cast_first_line_to_header=r.columns,r.columns=!0;else if(Array.isArray(r.columns))r.columns=Wa(r.columns);else if(r.columns===void 0||r.columns===null||r.columns===!1)r.columns=!1;else throw new K("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(r.columns)}`],r);if(r.group_columns_by_name===void 0||r.group_columns_by_name===null||r.group_columns_by_name===!1)r.group_columns_by_name=!1;else{if(r.group_columns_by_name!==!0)throw new K("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",`got ${JSON.stringify(r.group_columns_by_name)}`],r);if(r.columns===!1)throw new K("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],r)}if(r.comment===void 0||r.comment===null||r.comment===!1||r.comment==="")r.comment=null;else if(typeof r.comment=="string"&&(r.comment=Buffer.from(r.comment,r.encoding)),!Buffer.isBuffer(r.comment))throw new K("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(r.comment)}`],r);let t=JSON.stringify(r.delimiter);if(Array.isArray(r.delimiter)||(r.delimiter=[r.delimiter]),r.delimiter.length===0)throw new K("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${t}`],r);if(r.delimiter=r.delimiter.map(function(e){if(e==null||e===!1)return Buffer.from(",",r.encoding);if(typeof e=="string"&&(e=Buffer.from(e,r.encoding)),!Buffer.isBuffer(e)||e.length===0)throw new K("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${t}`],r);return e}),r.escape===void 0||r.escape===!0?r.escape=Buffer.from('"',r.encoding):typeof r.escape=="string"?r.escape=Buffer.from(r.escape,r.encoding):(r.escape===null||r.escape===!1)&&(r.escape=null),r.escape!==null&&!Buffer.isBuffer(r.escape))throw new Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(r.escape)}`);if(r.from===void 0||r.from===null)r.from=1;else if(typeof r.from=="string"&&/\d+/.test(r.from)&&(r.from=parseInt(r.from)),Number.isInteger(r.from)){if(r.from<0)throw new Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(n.from)}`)}else throw new Error(`Invalid Option: from must be an integer, got ${JSON.stringify(r.from)}`);if(r.from_line===void 0||r.from_line===null)r.from_line=1;else if(typeof r.from_line=="string"&&/\d+/.test(r.from_line)&&(r.from_line=parseInt(r.from_line)),Number.isInteger(r.from_line)){if(r.from_line<=0)throw new Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(n.from_line)}`)}else throw new Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(n.from_line)}`);if(r.ignore_last_delimiters===void 0||r.ignore_last_delimiters===null)r.ignore_last_delimiters=!1;else if(typeof r.ignore_last_delimiters=="number")r.ignore_last_delimiters=Math.floor(r.ignore_last_delimiters),r.ignore_last_delimiters===0&&(r.ignore_last_delimiters=!1);else if(typeof r.ignore_last_delimiters!="boolean")throw new K("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(r.ignore_last_delimiters)}`],r);if(r.ignore_last_delimiters===!0&&r.columns===!1)throw new K("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],r);if(r.info===void 0||r.info===null||r.info===!1)r.info=!1;else if(r.info!==!0)throw new Error(`Invalid Option: info must be true, got ${JSON.stringify(r.info)}`);if(r.max_record_size===void 0||r.max_record_size===null||r.max_record_size===!1)r.max_record_size=0;else if(!(Number.isInteger(r.max_record_size)&&r.max_record_size>=0))if(typeof r.max_record_size=="string"&&/\d+/.test(r.max_record_size))r.max_record_size=parseInt(r.max_record_size);else throw new Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(r.max_record_size)}`);if(r.objname===void 0||r.objname===null||r.objname===!1)r.objname=void 0;else if(Buffer.isBuffer(r.objname)){if(r.objname.length===0)throw new Error("Invalid Option: objname must be a non empty buffer");r.encoding===null||(r.objname=r.objname.toString(r.encoding))}else if(typeof r.objname=="string"){if(r.objname.length===0)throw new Error("Invalid Option: objname must be a non empty string")}else if(typeof r.objname!="number")throw new Error(`Invalid Option: objname must be a string or a buffer, got ${r.objname}`);if(r.objname!==void 0){if(typeof r.objname=="number"){if(r.columns!==!1)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(r.columns===!1)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index")}if(r.on_record===void 0||r.on_record===null)r.on_record=void 0;else if(typeof r.on_record!="function")throw new K("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(r.on_record)}`],r);if(r.quote===null||r.quote===!1||r.quote==="")r.quote=null;else if(r.quote===void 0||r.quote===!0?r.quote=Buffer.from('"',r.encoding):typeof r.quote=="string"&&(r.quote=Buffer.from(r.quote,r.encoding)),!Buffer.isBuffer(r.quote))throw new Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(r.quote)}`);if(r.raw===void 0||r.raw===null||r.raw===!1)r.raw=!1;else if(r.raw!==!0)throw new Error(`Invalid Option: raw must be true, got ${JSON.stringify(r.raw)}`);if(r.record_delimiter===void 0)r.record_delimiter=[];else if(typeof r.record_delimiter=="string"||Buffer.isBuffer(r.record_delimiter)){if(r.record_delimiter.length===0)throw new K("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,",`got ${JSON.stringify(r.record_delimiter)}`],r);r.record_delimiter=[r.record_delimiter]}else if(!Array.isArray(r.record_delimiter))throw new K("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(r.record_delimiter)}`],r);if(r.record_delimiter=r.record_delimiter.map(function(e,a){if(typeof e!="string"&&!Buffer.isBuffer(e))throw new K("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${a},`,`got ${JSON.stringify(e)}`],r);if(e.length===0)throw new K("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${a},`,`got ${JSON.stringify(e)}`],r);return typeof e=="string"&&(e=Buffer.from(e,r.encoding)),e}),typeof r.relax_column_count!="boolean")if(r.relax_column_count===void 0||r.relax_column_count===null)r.relax_column_count=!1;else throw new Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(r.relax_column_count)}`);if(typeof r.relax_column_count_less!="boolean")if(r.relax_column_count_less===void 0||r.relax_column_count_less===null)r.relax_column_count_less=!1;else throw new Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(r.relax_column_count_less)}`);if(typeof r.relax_column_count_more!="boolean")if(r.relax_column_count_more===void 0||r.relax_column_count_more===null)r.relax_column_count_more=!1;else throw new Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(r.relax_column_count_more)}`);if(typeof r.relax_quotes!="boolean")if(r.relax_quotes===void 0||r.relax_quotes===null)r.relax_quotes=!1;else throw new Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(r.relax_quotes)}`);if(typeof r.skip_empty_lines!="boolean")if(r.skip_empty_lines===void 0||r.skip_empty_lines===null)r.skip_empty_lines=!1;else throw new Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(r.skip_empty_lines)}`);if(typeof r.skip_records_with_empty_values!="boolean")if(r.skip_records_with_empty_values===void 0||r.skip_records_with_empty_values===null)r.skip_records_with_empty_values=!1;else throw new Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(r.skip_records_with_empty_values)}`);if(typeof r.skip_records_with_error!="boolean")if(r.skip_records_with_error===void 0||r.skip_records_with_error===null)r.skip_records_with_error=!1;else throw new Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(r.skip_records_with_error)}`);if(r.rtrim===void 0||r.rtrim===null||r.rtrim===!1)r.rtrim=!1;else if(r.rtrim!==!0)throw new Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(r.rtrim)}`);if(r.ltrim===void 0||r.ltrim===null||r.ltrim===!1)r.ltrim=!1;else if(r.ltrim!==!0)throw new Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(r.ltrim)}`);if(r.trim===void 0||r.trim===null||r.trim===!1)r.trim=!1;else if(r.trim!==!0)throw new Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(r.trim)}`);if(r.trim===!0&&n.ltrim!==!1?r.ltrim=!0:r.ltrim!==!0&&(r.ltrim=!1),r.trim===!0&&n.rtrim!==!1?r.rtrim=!0:r.rtrim!==!0&&(r.rtrim=!1),r.to===void 0||r.to===null)r.to=-1;else if(typeof r.to=="string"&&/\d+/.test(r.to)&&(r.to=parseInt(r.to)),Number.isInteger(r.to)){if(r.to<=0)throw new Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(n.to)}`)}else throw new Error(`Invalid Option: to must be an integer, got ${JSON.stringify(n.to)}`);if(r.to_line===void 0||r.to_line===null)r.to_line=-1;else if(typeof r.to_line=="string"&&/\d+/.test(r.to_line)&&(r.to_line=parseInt(r.to_line)),Number.isInteger(r.to_line)){if(r.to_line<=0)throw new Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(n.to_line)}`)}else throw new Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(n.to_line)}`);return r};var ac=function(n){return n.every(r=>r==null||r.toString&&r.toString().trim()==="")},oc=13,ru=10,Ba={utf8:Buffer.from([239,187,191]),utf16le:Buffer.from([255,254])},uc=function(n={}){let r={bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},t=nu(n);return{info:r,original_options:n,options:t,state:tc(t),__needMoreData:function(e,a,u){if(u)return!1;let{quote:i}=this.options,{quoting:f,needMoreDataSize:l,recordDelimiterMaxLength:c}=this.state,_=a-e-1,p=Math.max(l,c,f?i.length+c:0);return _<p},parse:function(e,a,u,i){let{bom:f,from_line:l,ltrim:c,max_record_size:_,raw:p,relax_quotes:y,rtrim:d,skip_empty_lines:o,to:s,to_line:un}=this.options,{comment:V,escape:N,quote:q,record_delimiter:tt}=this.options,{bomSkipped:N_,previousBuf:_a,rawBuffer:$_,escapeIsQuote:q_}=this.state,rn;if(_a===void 0)if(e===void 0){i();return}else rn=e;else _a!==void 0&&e===void 0?rn=_a:rn=Buffer.concat([_a,e]);if(N_===!1)if(f===!1)this.state.bomSkipped=!0;else if(rn.length<3){if(a===!1){this.state.previousBuf=rn;return}}else{for(let wn in Ba)if(Ba[wn].compare(rn,0,Ba[wn].length)===0){let et=Ba[wn].length;this.state.bufBytesStart+=et,rn=rn.slice(et),this.options=nu({...this.original_options,encoding:wn}),{comment:V,escape:N,quote:q}=this.options;break}this.state.bomSkipped=!0}let mo=rn.length,B;for(B=0;B<mo&&!this.__needMoreData(B,mo,a);B++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1),un!==-1&&this.info.lines>un){this.state.stop=!0,i();return}this.state.quoting===!1&&tt.length===0&&this.__autoDiscoverRecordDelimiter(rn,B)&&(tt=this.options.record_delimiter);let wn=rn[B];if(p===!0&&$_.append(wn),(wn===oc||wn===ru)&&this.state.wasRowDelimiter===!1&&(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(N!==null&&this.state.quoting===!0&&this.__isEscape(rn,B,wn)&&B+N.length<mo)if(q_){if(this.__isQuote(rn,B+N.length)){this.state.escaping=!0,B+=N.length-1;continue}}else{this.state.escaping=!0,B+=N.length-1;continue}if(this.state.commenting===!1&&this.__isQuote(rn,B))if(this.state.quoting===!0){let Bn=rn[B+q.length],hi=d&&this.__isCharTrimable(rn,B+q.length),pa=V!==null&&this.__compareBytes(V,rn,B+q.length,Bn),we=this.__isDelimiter(rn,B+q.length,Bn),ma=tt.length===0?this.__autoDiscoverRecordDelimiter(rn,B+q.length):this.__isRecordDelimiter(Bn,rn,B+q.length);if(N!==null&&this.__isEscape(rn,B,wn)&&this.__isQuote(rn,B+N.length))B+=N.length-1;else if(!Bn||we||ma||pa||hi){this.state.quoting=!1,this.state.wasQuoting=!0,B+=q.length-1;continue}else if(y===!1){let Ee=this.__error(new K("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(Bn)}"`,`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(Ee!==void 0)return Ee}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(q),B+=q.length-1}else if(this.state.field.length!==0){if(y===!1){let Bn=this.__error(new K("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found inside a field at line ${this.info.lines}`],this.options,this.__infoField(),{field:this.state.field}));if(Bn!==void 0)return Bn}}else{this.state.quoting=!0,B+=q.length-1;continue}if(this.state.quoting===!1){let Bn=this.__isRecordDelimiter(wn,rn,B);if(Bn!==0){if(this.state.commenting&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0)this.info.comment_lines++;else{if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=l){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),B+=Bn-1;continue}if(o===!0&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0){this.info.empty_lines++,B+=Bn-1;continue}this.info.bytes=this.state.bufBytesStart+B;let ma=this.__onField();if(ma!==void 0)return ma;this.info.bytes=this.state.bufBytesStart+B+Bn;let Ee=this.__onRecord(u);if(Ee!==void 0)return Ee;if(s!==-1&&this.info.records>=s){this.state.stop=!0,i();return}}this.state.commenting=!1,B+=Bn-1;continue}if(this.state.commenting)continue;if((V===null?0:this.__compareBytes(V,rn,B,wn))!==0){this.state.commenting=!0;continue}let pa=this.__isDelimiter(rn,B,wn);if(pa!==0){this.info.bytes=this.state.bufBytesStart+B;let we=this.__onField();if(we!==void 0)return we;B+=pa-1;continue}}}if(this.state.commenting===!1&&_!==0&&this.state.record_length+this.state.field.length>_)return this.__error(new K("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${_}`,`at line ${this.info.lines}`],this.options,this.__infoField()));let et=c===!1||this.state.quoting===!0||this.state.field.length!==0||!this.__isCharTrimable(rn,B),O_=d===!1||this.state.wasQuoting===!1;if(et===!0&&O_===!0)this.state.field.append(wn);else{if(d===!0&&!this.__isCharTrimable(rn,B))return this.__error(new K("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()));et===!1&&(B+=this.__isCharTrimable(rn,B)-1);continue}}if(a===!0)if(this.state.quoting===!0){let wn=this.__error(new K("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField()));if(wn!==void 0)return wn}else if(this.state.wasQuoting===!0||this.state.record.length!==0||this.state.field.length!==0){this.info.bytes=this.state.bufBytesStart+B;let wn=this.__onField();if(wn!==void 0)return wn;let et=this.__onRecord(u);if(et!==void 0)return et}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.bufBytesStart+=B,this.state.previousBuf=rn.slice(B);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(e){let{columns:a,group_columns_by_name:u,encoding:i,info:f,from:l,relax_column_count:c,relax_column_count_less:_,relax_column_count_more:p,raw:y,skip_records_with_empty_values:d}=this.options,{enabled:o,record:s}=this.state;if(o===!1)return this.__resetRecord();let un=s.length;if(a===!0){if(d===!0&&ac(s)){this.__resetRecord();return}return this.__firstLineToColumns(s)}if(a===!1&&this.info.records===0&&(this.state.expectedRecordLength=un),un!==this.state.expectedRecordLength){let V=a===!1?new K("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${un} on line ${this.info.lines}`],this.options,this.__infoField(),{record:s}):new K("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${a.length},`,`got ${un} on line ${this.info.lines}`],this.options,this.__infoField(),{record:s});if(c===!0||_===!0&&un<this.state.expectedRecordLength||p===!0&&un>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=V;else{let N=this.__error(V);if(N)return N}}if(d===!0&&ac(s)){this.__resetRecord();return}if(this.state.recordHasError===!0){this.__resetRecord(),this.state.recordHasError=!1;return}if(this.info.records++,l===1||this.info.records>=l){let{objname:V}=this.options;if(a!==!1){let N={};for(let q=0,tt=s.length;q<tt;q++)a[q]===void 0||a[q].disabled||(u===!0&&N[a[q].name]!==void 0?Array.isArray(N[a[q].name])?N[a[q].name]=N[a[q].name].concat(s[q]):N[a[q].name]=[N[a[q].name],s[q]]:N[a[q].name]=s[q]);if(y===!0||f===!0){let q=Object.assign({record:N},y===!0?{raw:this.state.rawBuffer.toString(i)}:{},f===!0?{info:this.__infoRecord()}:{}),tt=this.__push(V===void 0?q:[N[V],q],e);if(tt)return tt}else{let q=this.__push(V===void 0?N:[N[V],N],e);if(q)return q}}else if(y===!0||f===!0){let N=Object.assign({record:s},y===!0?{raw:this.state.rawBuffer.toString(i)}:{},f===!0?{info:this.__infoRecord()}:{}),q=this.__push(V===void 0?N:[s[V],N],e);if(q)return q}else{let N=this.__push(V===void 0?s:[s[V],s],e);if(N)return N}}this.__resetRecord()},__firstLineToColumns:function(e){let{firstLineToHeaders:a}=this.state;try{let u=a===void 0?e:a.call(null,e);if(!Array.isArray(u))return this.__error(new K("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(u)}`],this.options,this.__infoField(),{headers:u}));let i=Wa(u);this.state.expectedRecordLength=i.length,this.options.columns=i,this.__resetRecord();return}catch(u){return u}},__resetRecord:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){let{cast:e,encoding:a,rtrim:u,max_record_size:i}=this.options,{enabled:f,wasQuoting:l}=this.state;if(f===!1)return this.__resetField();let c=this.state.field.toString(a);if(u===!0&&l===!1&&(c=c.trimRight()),e===!0){let[_,p]=this.__cast(c);if(_!==void 0)return _;c=p}this.state.record.push(c),i!==0&&typeof c=="string"&&(this.state.record_length+=c.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(e,a){let{on_record:u}=this.options;if(u!==void 0){let i=this.__infoRecord();try{e=u.call(null,e,i)}catch(f){return f}if(e==null)return}a(e)},__cast:function(e){let{columns:a,relax_column_count:u}=this.options;if(Array.isArray(a)===!0&&u&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(this.state.castField!==null)try{let f=this.__infoField();return[void 0,this.state.castField.call(null,e,f)]}catch(f){return[f]}if(this.__isFloat(e))return[void 0,parseFloat(e)];if(this.options.cast_date!==!1){let f=this.__infoField();return[void 0,this.options.cast_date.call(null,e,f)]}return[void 0,e]},__isCharTrimable:function(e,a){return((i,f)=>{let{timchars:l}=this.state;n:for(let c=0;c<l.length;c++){let _=l[c];for(let p=0;p<_.length;p++)if(_[p]!==i[f+p])continue n;return _.length}return 0})(e,a)},__isFloat:function(e){return e-parseFloat(e)+1>=0},__compareBytes:function(e,a,u,i){if(e[0]!==i)return 0;let f=e.length;for(let l=1;l<f;l++)if(e[l]!==a[u+l])return 0;return f},__isDelimiter:function(e,a,u){let{delimiter:i,ignore_last_delimiters:f}=this.options;if(f===!0&&this.state.record.length===this.options.columns.length-1)return 0;if(f!==!1&&typeof f=="number"&&this.state.record.length===f-1)return 0;n:for(let l=0;l<i.length;l++){let c=i[l];if(c[0]===u){for(let _=1;_<c.length;_++)if(c[_]!==e[a+_])continue n;return c.length}}return 0},__isRecordDelimiter:function(e,a,u){let{record_delimiter:i}=this.options,f=i.length;n:for(let l=0;l<f;l++){let c=i[l],_=c.length;if(c[0]===e){for(let p=1;p<_;p++)if(c[p]!==a[u+p])continue n;return c.length}}return 0},__isEscape:function(e,a,u){let{escape:i}=this.options;if(i===null)return!1;let f=i.length;if(i[0]===u){for(let l=0;l<f;l++)if(i[l]!==e[a+l])return!1;return!0}return!1},__isQuote:function(e,a){let{quote:u}=this.options;if(u===null)return!1;let i=u.length;for(let f=0;f<i;f++)if(u[f]!==e[a+f])return!1;return!0},__autoDiscoverRecordDelimiter:function(e,a){let{encoding:u}=this.options,i=e[a];return i===oc?e[a+1]===ru?(this.options.record_delimiter.push(Buffer.from(`\r
`,u)),this.state.recordDelimiterMaxLength=2,2):(this.options.record_delimiter.push(Buffer.from("\r",u)),this.state.recordDelimiterMaxLength=1,1):i===ru?(this.options.record_delimiter.push(Buffer.from(`
`,u)),this.state.recordDelimiterMaxLength=1,1):0},__error:function(e){let{encoding:a,raw:u,skip_records_with_error:i}=this.options,f=typeof e=="string"?new Error(e):e;if(i){this.state.recordHasError=!0,this.options.on_skip!==void 0&&this.options.on_skip(f,u?this.state.rawBuffer.toString(a):void 0);return}else return f},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){let{columns:e,raw:a,encoding:u}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:e===!0,index:this.state.record.length,raw:a?this.state.rawBuffer.toString(u):void 0}},__infoField:function(){let{columns:e}=this.options,a=Array.isArray(e);return{...this.__infoRecord(),column:a===!0?e.length>this.state.record.length?e[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}};var ic=function(n,r={}){typeof n=="string"&&(n=Buffer.from(n));let t=r&&r.objname?{}:[],e=uc(r),a=l=>{e.options.objname===void 0?t.push(l):t[l[0]]=l[1]},u=()=>{},i=e.parse(n,!1,a,u);if(i!==void 0)throw i;let f=e.parse(void 0,!0,a,u);if(f!==void 0)throw f;return t};import{readFileSync as mv}from"node:fs";function tu(n){let r=mv(n,{encoding:"utf-8"});return ic(r,{columns:!1,relax_column_count:!0})}var dv=v(Cn);var Dv=h(Wr),yv=v(on),hv=v(lr);var gv=function(n){if(n.length===0)return[];var r=function(a){return a},t=ut(1)(Ln(n)),e=Gr(t)(n);return dv(r)(e)};var bv=function(n){return Dv(tu(n))};var wv=function(n){var r=yv(gv)(Ho(n)),t=Ko(n);return{headers:t,rows:r}},eu=Jn(Xn)(Wr)(function(n){return hv(wv)(bv(n))});var Ev=function(){function n(i){this.fn=i}var r={},t=function(i,f){this.head=i,this.tail=f};function e(i){return new t(i,r)}function a(i){return function(f){return new t(i,f)}}function u(i){for(var f=[],l=i;l!==r;)f.push(l.head),l=l.tail;return f}return function(i){return function(f){return function(l){var c=function(p,y){return i(f(a)(l(p)))(y)},_=function(p,y,d){if(y===0)return p;var o=d[y-1];return new n(function(){var s=_(c(o,p),y-1,d);return s})};return function(p){for(var y=f(e)(l(p[p.length-1])),d=_(y,p.length-1,p);d instanceof n;)d=d.fn();return f(u)(d)}}}}}();var Ir=function(n){return n.foldrWithIndex};var kr=function(n){return n.foldlWithIndex};var jr=function(n){return n.foldMapWithIndex};var sc=function(n){return n};var _c=Xn;var Ke=Cn;var pc=Sn;var Vr=function(){function n(r,t){this.value0=r,this.value1=t}return n.create=function(r){return function(t){return new n(r,t)}},n}();var uu=function(n){var r=v(n);return{map:function(t){return function(e){return new Vr(t(e.value0),r(t)(e.value1))}}}};var iu=function(n){var r=Tn(n),t=en(n),e=vn(n);return{foldMap:function(a){var u=I(a.Semigroup0()),i=r(a);return function(f){return function(l){return u(f(l.value0))(i(f)(l.value1))}}},foldl:function(a){return function(u){return function(i){return t(a)(a(u)(i.value0))(i.value1)}}},foldr:function(a){return function(u){return function(i){return a(i.value0)(e(a)(u)(i.value1))}}}}};var vc=function(n){var r=en(n),t=vn(n),e=iu(n);return{foldMap1:function(a){var u=I(a);return function(i){return function(f){return r(function(l){return function(c){return u(l)(i(c))}})(i(f.value0))(f.value1)}}},foldr1:function(a){return function(u){return Fn(u.value0)(a(u.value0))(t(function(i){var f=Fn(i)(a(i));return function(l){return m.create(f(l))}})(D.value)(u.value1))}},foldl1:function(a){return function(u){return r(a)(u.value0)(u.value1)}},Foldable0:function(){return e}}};var Dc=sc;var ue=function(n){return n};var yc=function(n){var r=ee(n.Foldable0());return function(t){return Dc(r(t))}},fu=function(n){if(Ln(n)>0)return new m(Dc(n));if(gn)return D.value;throw new Error("Failed pattern match at Data.Array.NonEmpty (line 160, column 1 - line 160, column 58): "+[n.constructor.name])};var hc=function(n){return function(r){return n(ue(r))}};var gc=function(n){return hc(fr(n))};var cu=hc(Ln);var dn=function(){function n(){}return n.value=new n,n}(),x=function(){function n(r,t){this.value0=r,this.value1=t}return n.create=function(r){return function(t){return new n(r,t)}},n}();var Uv=function(n){var r=function(t){return function(e){var a=t,u=!1,i;function f(l,c){if(c instanceof x&&c.value1 instanceof x&&c.value1.value1 instanceof x){a=new x(c,l),e=c.value1.value1.value1;return}var _=function(y){return y instanceof x&&y.value1 instanceof x&&y.value1.value1 instanceof dn?new x(n(y.value0),new x(n(y.value1.value0),dn.value)):y instanceof x&&y.value1 instanceof dn?new x(n(y.value0),dn.value):dn.value},p=function(y){return function(d){var o=y,s=!1,un;function V(N,q){if(N instanceof x&&N.value0 instanceof x&&N.value0.value1 instanceof x&&N.value0.value1.value1 instanceof x){o=N.value1,d=new x(n(N.value0.value0),new x(n(N.value0.value1.value0),new x(n(N.value0.value1.value1.value0),q)));return}return s=!0,q}for(;!s;)un=V(o,d);return un}};return u=!0,p(l)(_(c))}for(;!u;)i=f(a,e);return i}};return r(dn.value)},wc={map:Uv};var su=uu(wc),Qr={foldr:function(n){return function(r){var t=function(){var a=function(u){return function(i){var f=u,l=!1,c;function _(p,y){if(y instanceof dn)return l=!0,p;if(y instanceof x){f=new x(y.value0,p),i=y.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[p.constructor.name,y.constructor.name])}for(;!l;)c=_(f,i);return c}};return a(dn.value)}(),e=en(Qr)(cn(n))(r);return function(a){return e(t(a))}}},foldl:function(n){var r=function(t){return function(e){var a=t,u=!1,i;function f(l,c){if(c instanceof dn)return u=!0,l;if(c instanceof x){a=n(l)(c.value0),e=c.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[c.constructor.name])}for(;!u;)i=f(a,e);return i}};return r},foldMap:function(n){var r=I(n.Semigroup0()),t=pn(n);return function(e){return en(Qr)(function(a){var u=r(a);return function(i){return u(e(i))}})(t)}}};var Ec=vc(Qr);var pu=function(n){return n.join("")};var fe=function(n){return n},Cc=function(n){return function(r){return function(t){return function(e){return t>=0&&t<e.length?n(e.charAt(t)):r}}}};var _r=function(n){return n.length};var Hr=function(n){return function(r){return r.substring(n)}};var Ye=function(n){return function(r){return{before:r.substring(0,n),after:r.substring(n)}}};var Kr=function(n){return function(r){if(n>=0&&n<r.length)return r.charAt(n);throw new Error("Data.String.Unsafe.charAt: Invalid index.")}};var za=function(n){return function(r){var t=Ye(_r(r)-_r(n)|0)(r),e=t.after===n;return e?new m(t.before):D.value}};var Ja=function(){return Cc(m.create)(D.value)}();var $t=function(n){return function(r){return r.join(n)}};var du=function(n){return n===""};var Kv=g(Vn);var Lc=function(n){return n};var Ar=function(n){return n};var Ga={show:function(n){return"(NonEmptyString.unsafeFromString "+(Kv(n)+")")}};var Du=go;var ce=Gt;var yu=function(n){return n===""?D.value:new m(n)};var hu=hr;var rd=zn(),td=Lc;var ed=function(n){return n.length===0?D.value:new m(td(pu(n)))},Ac=function(n){return rd(ed(ue(n)))};var xc=function(n){return n},ud=function(n){return function(r){return function(t){if(t instanceof b)return n(t.value0);if(t instanceof F)return r(t.value0);throw new Error("Failed pattern match at Data.Validation.Semigroup (line 48, column 1 - line 48, column 84): "+[n.constructor.name,r.constructor.name,t.constructor.name])}}},pr=function(n){return n};var yn=function(n){return xc(b.create(n))},Xe=Er;var Ze=function(n){var r=I(n);return{apply:function(t){return function(e){if(t instanceof b&&e instanceof b)return new b(r(t.value0)(e.value0));if(t instanceof b)return new b(t.value0);if(e instanceof b)return new b(e.value0);if(t instanceof F&&e instanceof F)return new F(t.value0(e.value0));throw new Error("Failed pattern match at Data.Validation.Semigroup (line 89, column 1 - line 93, column 54): "+[t.constructor.name,e.constructor.name])}},Functor0:function(){return Xe}}};var ar=function(n){var r=Ze(n);return{pure:function(t){return xc(F.create(t))},Apply0:function(){return r}}};var Yr=function(n){return function(r){return ud(yn)(r)(n)}};function vt(n){return n.charCodeAt(0)}function Nc(n){return String.fromCharCode(n)}var Rc=jn(Ft),Wc=Kn(Ft);var nr=function(n){return n.toEnum};var Wn=function(n){return n.fromEnum},Bc=function(n){var r=nr(n),t=Wn(n),e=jn(n.Bounded0());return function(a){return function(u){return function(i){var f=r(i);if(f instanceof m)return f.value0;if(f instanceof D){var l=i<t(e);return l?a:u}throw new Error("Failed pattern match at Data.Enum (line 158, column 33 - line 160, column 62): "+[f.constructor.name])}}}};var bu=function(n){return function(r){return function(t){return n(r(t)+1|0)}}},wu=function(n){return function(r){return function(t){return n(r(t)-1|0)}}};var gu=function(n){return n>=vt(Rc)&&n<=vt(Wc)?new m(Nc(n)):D.value},sd={succ:bu(gu)(vt),pred:wu(gu)(vt),Ord0:function(){return Ca}};var Pt=function(){return{cardinality:vt(Wc)-vt(Rc)|0,toEnum:gu,fromEnum:vt,Bounded0:function(){return Ft},Enum1:function(){return sd}}}();var Eu=Wn(Pt),Uc=nr(Pt);var _d=typeof Array.from=="function",pd=typeof Symbol<"u"&&Symbol!=null&&typeof Symbol.iterator<"u"&&typeof String.prototype[Symbol.iterator]=="function",md=typeof String.prototype.fromCodePoint=="function",vd=typeof String.prototype.codePointAt=="function",Jc=function(n){return vd?function(r){return r.codePointAt(0)}:n};var Gc=function(n){return md?String.fromCodePoint:n},kc=function(n){return function(r){return pd?function(t){for(var e="",a=t[Symbol.iterator](),u=0;u<r;++u){var i=a.next();if(i.done)return e;e+=i.value}return e}:n(r)}},jc=function(n){return function(r){return _d?function(t){return Array.from(t,r)}:n}};var Ed=function(n,r,t){var e=0,a;return function(u){if(e===2)return a;if(e===1)throw new ReferenceError(n+" was needed before it finished initializing (module "+r+", line "+u+")",r,u);return e=1,a=t(),e=2,a}},na=Wn(Pt),Cd=v(on),Td=Jr(ke),Fd=$e(Qt),Sd=Ne(Qt),Md=P(br);var Kc=function(n){return function(r){return(((n-55296|0)*1024|0)+(r-56320|0)|0)+65536|0}};var Yc=function(n){return 56320<=n&&n<=57343},Xc=function(n){return 55296<=n&&n<=56319},ja=function(n){var r=_r(n);if(r===0)return D.value;if(r===1)return new m({head:na(Kr(0)(n)),tail:""});var t=na(Kr(1)(n)),e=na(Kr(0)(n)),a=Xc(e)&&Yc(t);return a?new m({head:Kc(e)(t),tail:Hr(2)(n)}):new m({head:e,tail:Hr(1)(n)})},Id=function(n){return Cd(function(r){return new W(r.head,r.tail)})(ja(n))},Ld=function(n){return Td(Id)(n)},Ad=function(n){var r=na(Kr(0)(n)),t=Xc(r)&&_r(n)>1;if(t){var e=na(Kr(1)(n)),a=Yc(e);return a?Kc(r)(e):r}return r},xd=Jc(Ad),Nd=jc(Ld)(xd),Va=function(n){return Ln(Nd(n))};var Tu=function(){var n=Bc(Pt)(jn(Ft))(Kn(Ft));return function(r){return fe(n(r))}}(),$d=function(n){if(n<=65535)return Tu(n);var r=Fd(n-65536|0)(1024)+55296|0,t=Sd(n-65536|0)(1024)+56320|0;return Tu(r)+Tu(t)};var qd=Gc($d),Zc=function(n){return function(r){if(n<1)return"";var t=ja(r);return t instanceof m?qd(t.value0.head)+Zc(n-1|0)(t.value0.tail):r}},Od=kc(Zc);var nl=function(n){return function(r){var t=Od(n)(r);return{before:t,after:Hr(_r(t))(r)}}},rl={eq:function(n){return function(r){return n===r}}},tl={compare:function(n){return function(r){return Md(n)(r)}},Eq0:function(){return rl}};var Pd={bottom:0,top:1114111,Ord0:function(){return tl}},se=function(){return{cardinality:1114111+1|0,fromEnum:function(n){return n},toEnum:function(n){if(n>=0&&n<=1114111)return new m(n);if(gn)return D.value;throw new Error("Failed pattern match at Data.String.CodePoints (line 63, column 1 - line 68, column 26): "+[n.constructor.name])},Bounded0:function(){return Pd},Enum1:function(){return Rd(0)}}}(),Rd=Ed("enumCodePoint","Data.String.CodePoints",function(){return{succ:bu(nr(se))(Wn(se)),pred:wu(nr(se))(Wn(se)),Ord0:function(){return tl}}});var kd=Yt(pf);var fl=function(){var n=function(r){return function(t){var e=r,a=!1,u;function i(f,l){if(l instanceof dn)return a=!0,f;if(l instanceof x){e=new x(l.value0,f),t=l.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[f.constructor.name,l.constructor.name])}for(;!a;)u=i(e,t);return u}};return n(dn.value)}();var cl=function(n){var r=S(n.Monad0().Bind1()),t=Mt(n);return function(e){var a=e.Plus1().Alt0(),u=hn(a),i=v(a.Functor0()),f=h(e.Applicative0());return function(l){var c=function(_){return r(u(i(xn.create)(l))(f(new In(void 0))))(function(p){return f(kd(function(y){return new x(y,_)})(function(y){return fl(_)})(p))})};return t(c)(dn.value)}}};var ll=function(n){return n()};var sl=function(n){throw new Error(n)};var _l=function(){return sl};var Hd=_l(),Kd=ll,_e=function(n){return Kd(function(){return Hd(n)})};var Iu=v(Er);var Mu=S(Fo),nD=h(Fa),rD=Mt(_f);var ml=function(n){return n},pe=function(n){return function(r){return Iu(function(t){return t.result})(n({substring:r,position:0}))}};var vr={map:function(n){return function(r){var t=Iu(function(e){return{result:n(e.result),suffix:e.suffix}});return function(e){return t(r(e))}}}},xr=function(n){return function(r){return new b({pos:r.position,error:n})}},Nr={apply:function(n){return function(r){return function(t){return Mu(n(t))(function(e){return Mu(r(e.suffix))(function(a){return nD({result:e.result(a.result),suffix:a.suffix})})})}}},Functor0:function(){return vr}};var Qn={bind:function(n){return function(r){return function(t){return Mu(n(t))(function(e){return ml(r(e.result))(e.suffix)})}}},Apply0:function(){return Nr}};var rr={pure:function(n){return function(r){return new F({result:n,suffix:r})}},Apply0:function(){return Nr}};var tD={Applicative0:function(){return rr},Bind1:function(){return Qn}},vl={tailRecM:function(n){return function(r){var t=function(e){if(e.result instanceof xn)return new xn({state:e.result.value0,str:e.suffix});if(e.result instanceof In)return new In({result:e.result.value0,suffix:e.suffix});throw new Error("Failed pattern match at StringParser.Parser (line 87, column 5 - line 87, column 68): "+[e.constructor.name])};return function(e){return rD(function(a){return Iu(t)(ml(n(a.state))(a.str))})({state:r,str:e})}}},Monad0:function(){return tD}};var dr={alt:function(n){return function(r){return function(t){var e=n(t);if(e instanceof b){if(t.position===e.value0.pos)return r(t);if(gn)return new b({error:e.value0.error,pos:e.value0.pos})}return e}}},Functor0:function(){return vr}},eD={empty:xr("No alternative"),Alt0:function(){return dr}},dl={Applicative0:function(){return rr},Plus1:function(){return eD}};var yl=hn(dr),Dl=S(Qn),uD=h(rr),iD=v(vr);var fD=Et(Nr),cD=Q(Nr);var ve=function(n){return function(r){return yl(n)(xr(r))}},or=function(n){return function(r){var t=n(r);return t instanceof b?new b({pos:r.position,error:t.value0.error}):t}};var hl=function(n){return function(r){return new Vr(n,r)}};var gl=function(n){return en(n)(yl)(xr("Nothing to parse"))};var lD=function(n){return function(r){var t=n(r);if(t instanceof F){var e=r.position<t.value0.suffix.position;return e?new F(t.value0):new b({pos:r.position,error:"Consumed no input."})}return t}},Ka=function(){var n=cl(vl)(dl);return function(r){return n(lD(r))}}(),bl=function(n){return cD(iD(hl)(n))(Ka(n))};var wl=function(n){return function(r){return Dl(n)(function(t){return Dl(Ka(fD(r)(n)))(function(e){return uD(hl(t)(e))})})}};var Lu=function(n){var r=Ja(0)(n.substring);if(r instanceof m)return new F({result:r.value0,suffix:{substring:Hr(1)(n.substring),position:n.position+1|0}});if(r instanceof D)return new b({pos:n.position,error:"Unexpected EOF"});throw new Error("Failed pattern match at StringParser.CodeUnits (line 50, column 3 - line 52, column 63): "+[r.constructor.name])};var Xa=S(Qn),mD=At(Sn)(ct),Za=h(rr),no=g(To);var vD=g(Un);var Gn=function(n){return function(r){var t=Va(n),e=nl(t)(r.substring),a=e.before===n;return a?new F({result:n,suffix:{substring:e.after,position:r.position+t|0}}):new b({pos:r.position,error:"Expected '"+(n+"'.")})}};var Fl=or(Xa(Lu)(function(n){var r=mD(Eu(n))(ut(97)(122));return r?Za(n):xr("Expected a lower case character but found "+no(n))})),Xr=function(n){return 0<Va(n.substring)?new b({pos:n.position,error:"Expected EOF"}):new F({result:void 0,suffix:n})};var Sl=or(Xa(Lu)(function(n){var r=n>="0"&&n<="9";return r?Za(n):xr("Character "+(no(n)+" is not a digit"))})),dD=function(n){var r=ja(n.substring);if(r instanceof D)return new b({pos:n.position,error:"Unexpected EOF"});if(r instanceof m)return new F({result:r.value0.head,suffix:{substring:r.value0.tail,position:n.position+1|0}});throw new Error("Failed pattern match at StringParser.CodePoints (line 72, column 3 - line 74, column 103): "+[r.constructor.name])};var DD=function(){var n=function(r){return xr("Code point "+(vD(r)+" is not a character"))};return Xa(zt(vr)(dD)(Wn(se)))(function(r){var t=Uc(r);if(t instanceof m){var e=r>65535;return e?n(r):Za(t.value0)}if(t instanceof D)return n(r);throw new Error("Failed pattern match at StringParser.CodePoints (line 57, column 3 - line 65, column 27): "+[t.constructor.name])})}(),yD=function(n){return or(Xa(DD)(function(r){var t=n(r);return t?Za(r):xr("Character "+(no(r)+" did not satisfy predicate"))}))},Ml=function(n){return ve(yD(function(r){return r===n}))("Could not match character "+no(n))};var hD=O(hu),gD=P(ce),xl=hn(dr),bD=h(rr),wD=h(ar(_n)),ED=g(Un);var ro=function(n){var r=yu(n);if(r instanceof m)return r.value0;if(r instanceof D)return"undefined_id";throw new Error("Failed pattern match at Data.DDF.Identifier (line 80, column 18 - line 82, column 48): "+[r.constructor.name])};var Nl={eq:function(n){return function(r){return hD(n)(r)}}},ta={compare:function(n){return function(r){return gD(n)(r)}},Eq0:function(){return Nl}},CD=xl(Fl)(ve(Sl)("expect lowercase alphanumeric value")),TD=xl(CD)(ve(Ml("_"))("expect lowercase alphanumeric and underscore _")),ur=function(){var n=function(){var r=yc(Ec);return function(t){return Ac(r(t))}}();return S(Qn)(bl(TD))(function(r){return bD(n(r))})}(),FD=Ce(Nr)(ur)(Xr),xu=function(n){var r=pe(FD)(n);if(r instanceof F)return wD(r.value0);if(r instanceof b){var t=ED(r.value0.pos),e="invalid id: "+(n+(", "+(r.value0.error+("at pos "+t))));return yn([e])}throw new Error("Failed pattern match at Data.DDF.Identifier (line 63, column 13 - line 71, column 20): "+[r.constructor.name])};var T=function(){function n(){}return n.value=new n,n}(),L=function(){function n(r,t,e,a){this.value0=r,this.value1=t,this.value2=e,this.value3=a}return n.create=function(r){return function(t){return function(e){return function(a){return new n(r,t,e,a)}}}},n}(),J=function(){function n(r,t,e,a,u,i,f){this.value0=r,this.value1=t,this.value2=e,this.value3=a,this.value4=u,this.value5=i,this.value6=f}return n.create=function(r){return function(t){return function(e){return function(a){return function(u){return function(i){return function(f){return new n(r,t,e,a,u,i,f)}}}}}}},n}(),dt=function(){function n(r,t,e){this.value0=r,this.value1=t,this.value2=e}return n.create=function(r){return function(t){return function(e){return new n(r,t,e)}}},n}(),Zr=function(){function n(r,t,e){this.value0=r,this.value1=t,this.value2=e}return n.create=function(r){return function(t){return function(e){return new n(r,t,e)}}},n}(),Dt=function(){function n(r,t,e,a,u,i){this.value0=r,this.value1=t,this.value2=e,this.value3=a,this.value4=u,this.value5=i}return n.create=function(r){return function(t){return function(e){return function(a){return function(u){return function(i){return new n(r,t,e,a,u,i)}}}}}},n}(),$r=function(){function n(r,t,e,a,u,i){this.value0=r,this.value1=t,this.value2=e,this.value3=a,this.value4=u,this.value5=i}return n.create=function(r){return function(t){return function(e){return function(a){return function(u){return function(i){return new n(r,t,e,a,u,i)}}}}}},n}(),yt=function(){function n(r,t,e,a,u,i){this.value0=r,this.value1=t,this.value2=e,this.value3=a,this.value4=u,this.value5=i}return n.create=function(r){return function(t){return function(e){return function(a){return function(u){return function(i){return new n(r,t,e,a,u,i)}}}}}},n}(),to=function(){function n(r,t,e,a){this.value0=r,this.value1=t,this.value2=e,this.value3=a}return n.create=function(r){return function(t){return function(e){return function(a){return new n(r,t,e,a)}}}},n}();var eo=function(n){var r=P(n);return function(t){var e=function(a){var u=!1,i;function f(l){if(l instanceof T)return u=!0,D.value;if(l instanceof L){var c=r(t)(l.value1);if(c instanceof j)return u=!0,new m(l.value2);if(c instanceof U){a=l.value0;return}a=l.value3;return}if(l instanceof J){var _=r(t)(l.value1);if(_ instanceof j)return u=!0,new m(l.value2);var p=r(t)(l.value4);if(p instanceof j)return u=!0,new m(l.value5);if(_ instanceof U){a=l.value0;return}if(p instanceof k){a=l.value6;return}a=l.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[l.constructor.name])}for(;!u;)i=f(a);return i};return e}},de=function(n){var r=eo(n);return function(t){return function(e){return xe(r(t)(e))}}};var qu=function(n){return n instanceof T};var Wl=function(n){return function(r){return function(t){var e=n,a=r,u=!1,i;function f(l,c,_){if(c instanceof dn)return u=!0,_;if(c instanceof x){if(c.value0 instanceof dt){e=l,a=c.value1,t=new L(_,c.value0.value0,c.value0.value1,c.value0.value2);return}if(c.value0 instanceof Zr){e=l,a=c.value1,t=new L(c.value0.value0,c.value0.value1,c.value0.value2,_);return}if(c.value0 instanceof Dt){e=l,a=c.value1,t=new J(_,c.value0.value0,c.value0.value1,c.value0.value2,c.value0.value3,c.value0.value4,c.value0.value5);return}if(c.value0 instanceof $r){e=l,a=c.value1,t=new J(c.value0.value0,c.value0.value1,c.value0.value2,_,c.value0.value3,c.value0.value4,c.value0.value5);return}if(c.value0 instanceof yt){e=l,a=c.value1,t=new J(c.value0.value0,c.value0.value1,c.value0.value2,c.value0.value3,c.value0.value4,c.value0.value5,_);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[c.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[c.constructor.name,_.constructor.name])}for(;!u;)i=f(e,a,t);return i}}},De=function(n){var r=Wl(n),t=P(n);return function(e){return function(a){var u=function(f){return function(l){var c=f,_=!1,p;function y(d,o){if(d instanceof dn)return _=!0,new L(o.value0,o.value1,o.value2,o.value3);if(d instanceof x){if(d.value0 instanceof dt)return _=!0,r(d.value1)(new J(o.value0,o.value1,o.value2,o.value3,d.value0.value0,d.value0.value1,d.value0.value2));if(d.value0 instanceof Zr)return _=!0,r(d.value1)(new J(d.value0.value0,d.value0.value1,d.value0.value2,o.value0,o.value1,o.value2,o.value3));if(d.value0 instanceof Dt){c=d.value1,l=new to(new L(o.value0,o.value1,o.value2,o.value3),d.value0.value0,d.value0.value1,new L(d.value0.value2,d.value0.value3,d.value0.value4,d.value0.value5));return}if(d.value0 instanceof $r){c=d.value1,l=new to(new L(d.value0.value0,d.value0.value1,d.value0.value2,o.value0),o.value1,o.value2,new L(o.value3,d.value0.value3,d.value0.value4,d.value0.value5));return}if(d.value0 instanceof yt){c=d.value1,l=new to(new L(d.value0.value0,d.value0.value1,d.value0.value2,d.value0.value3),d.value0.value4,d.value0.value5,new L(o.value0,o.value1,o.value2,o.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[d.value0.constructor.name,o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[d.constructor.name,o.constructor.name])}for(;!_;)p=y(c,l);return p}},i=function(f){return function(l){var c=f,_=!1,p;function y(d,o){if(o instanceof T)return _=!0,u(d)(new to(T.value,e,a,T.value));if(o instanceof L){var s=t(e)(o.value1);if(s instanceof j)return _=!0,r(d)(new L(o.value0,e,a,o.value3));if(s instanceof U){c=new x(new dt(o.value1,o.value2,o.value3),d),l=o.value0;return}c=new x(new Zr(o.value0,o.value1,o.value2),d),l=o.value3;return}if(o instanceof J){var un=t(e)(o.value1);if(un instanceof j)return _=!0,r(d)(new J(o.value0,e,a,o.value3,o.value4,o.value5,o.value6));var V=t(e)(o.value4);if(V instanceof j)return _=!0,r(d)(new J(o.value0,o.value1,o.value2,o.value3,e,a,o.value6));if(un instanceof U){c=new x(new Dt(o.value1,o.value2,o.value3,o.value4,o.value5,o.value6),d),l=o.value0;return}if(un instanceof k&&V instanceof U){c=new x(new $r(o.value0,o.value1,o.value2,o.value4,o.value5,o.value6),d),l=o.value3;return}c=new x(new yt(o.value0,o.value1,o.value2,o.value3,o.value4,o.value5),d),l=o.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[d.constructor.name,o.constructor.name])}for(;!_;)p=y(c,l);return p}};return i(dn.value)}}},Bl=function(n){var r=Wl(n),t=P(n);return function(e){var a=function(l){return function(c){var _=l,p=!1,y;function d(o,s){if(o instanceof dn)return p=!0,s;if(o instanceof x){if(o.value0 instanceof dt&&o.value0.value2 instanceof T&&s instanceof T)return p=!0,r(o.value1)(new L(T.value,o.value0.value0,o.value0.value1,T.value));if(o.value0 instanceof Zr&&o.value0.value0 instanceof T&&s instanceof T)return p=!0,r(o.value1)(new L(T.value,o.value0.value1,o.value0.value2,T.value));if(o.value0 instanceof dt&&o.value0.value2 instanceof L){_=o.value1,c=new J(s,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3);return}if(o.value0 instanceof Zr&&o.value0.value0 instanceof L){_=o.value1,c=new J(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,s);return}return o.value0 instanceof dt&&o.value0.value2 instanceof J?(p=!0,r(o.value1)(new L(new L(s,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new L(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6)))):o.value0 instanceof Zr&&o.value0.value0 instanceof J?(p=!0,r(o.value1)(new L(new L(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new L(o.value0.value0.value6,o.value0.value1,o.value0.value2,s)))):o.value0 instanceof Dt&&o.value0.value2 instanceof T&&o.value0.value5 instanceof T&&s instanceof T?(p=!0,r(o.value1)(new J(T.value,o.value0.value0,o.value0.value1,T.value,o.value0.value3,o.value0.value4,T.value))):o.value0 instanceof $r&&o.value0.value0 instanceof T&&o.value0.value5 instanceof T&&s instanceof T?(p=!0,r(o.value1)(new J(T.value,o.value0.value1,o.value0.value2,T.value,o.value0.value3,o.value0.value4,T.value))):o.value0 instanceof yt&&o.value0.value0 instanceof T&&o.value0.value3 instanceof T&&s instanceof T?(p=!0,r(o.value1)(new J(T.value,o.value0.value1,o.value0.value2,T.value,o.value0.value4,o.value0.value5,T.value))):o.value0 instanceof Dt&&o.value0.value2 instanceof L?(p=!0,r(o.value1)(new L(new J(s,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof $r&&o.value0.value0 instanceof L?(p=!0,r(o.value1)(new L(new J(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,s),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof $r&&o.value0.value5 instanceof L?(p=!0,r(o.value1)(new L(o.value0.value0,o.value0.value1,o.value0.value2,new J(s,o.value0.value3,o.value0.value4,o.value0.value5.value0,o.value0.value5.value1,o.value0.value5.value2,o.value0.value5.value3)))):o.value0 instanceof yt&&o.value0.value3 instanceof L?(p=!0,r(o.value1)(new L(o.value0.value0,o.value0.value1,o.value0.value2,new J(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3,o.value0.value4,o.value0.value5,s)))):o.value0 instanceof Dt&&o.value0.value2 instanceof J?(p=!0,r(o.value1)(new J(new L(s,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new L(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof $r&&o.value0.value0 instanceof J?(p=!0,r(o.value1)(new J(new L(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new L(o.value0.value0.value6,o.value0.value1,o.value0.value2,s),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof $r&&o.value0.value5 instanceof J?(p=!0,r(o.value1)(new J(o.value0.value0,o.value0.value1,o.value0.value2,new L(s,o.value0.value3,o.value0.value4,o.value0.value5.value0),o.value0.value5.value1,o.value0.value5.value2,new L(o.value0.value5.value3,o.value0.value5.value4,o.value0.value5.value5,o.value0.value5.value6)))):o.value0 instanceof yt&&o.value0.value3 instanceof J?(p=!0,r(o.value1)(new J(o.value0.value0,o.value0.value1,o.value0.value2,new L(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3),o.value0.value3.value4,o.value0.value3.value5,new L(o.value0.value3.value6,o.value0.value4,o.value0.value5,s)))):(p=!0,_e("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[o.constructor.name])}for(;!p;)y=d(_,c);return y}},u=function(l){return function(c){var _=l,p=!1,y;function d(o,s){if(s instanceof L&&s.value0 instanceof T&&s.value3 instanceof T)return p=!0,a(o)(T.value);if(s instanceof L){_=new x(new Zr(s.value0,s.value1,s.value2),o),c=s.value3;return}if(s instanceof J&&s.value0 instanceof T&&s.value3 instanceof T&&s.value6 instanceof T)return p=!0,a(new x(new Zr(T.value,s.value1,s.value2),o))(T.value);if(s instanceof J){_=new x(new yt(s.value0,s.value1,s.value2,s.value3,s.value4,s.value5),o),c=s.value6;return}return p=!0,_e("The impossible happened in partial function `removeMaxNode`.")}for(;!p;)y=d(_,c);return y}},i=function(l){var c=!1,_;function p(y){if(y instanceof L&&y.value3 instanceof T)return c=!0,{key:y.value1,value:y.value2};if(y instanceof L){l=y.value3;return}if(y instanceof J&&y.value6 instanceof T)return c=!0,{key:y.value4,value:y.value5};if(y instanceof J){l=y.value6;return}return c=!0,_e("The impossible happened in partial function `maxNode`.")}for(;!c;)_=p(l);return _},f=function(l){return function(c){var _=l,p=!1,y;function d(o,s){if(s instanceof T)return p=!0,D.value;if(s instanceof L){var un=t(e)(s.value1);if(s.value3 instanceof T&&un instanceof j)return p=!0,new m(new W(s.value2,a(o)(T.value)));if(un instanceof j){var V=i(s.value0);return p=!0,new m(new W(s.value2,u(new x(new dt(V.key,V.value,s.value3),o))(s.value0)))}if(un instanceof U){_=new x(new dt(s.value1,s.value2,s.value3),o),c=s.value0;return}_=new x(new Zr(s.value0,s.value1,s.value2),o),c=s.value3;return}if(s instanceof J){var N=function(){return s.value0 instanceof T&&s.value3 instanceof T&&s.value6 instanceof T}(),un=t(e)(s.value4),q=t(e)(s.value1);if(N&&q instanceof j)return p=!0,new m(new W(s.value2,r(o)(new L(T.value,s.value4,s.value5,T.value))));if(N&&un instanceof j)return p=!0,new m(new W(s.value5,r(o)(new L(T.value,s.value1,s.value2,T.value))));if(q instanceof j){var V=i(s.value0);return p=!0,new m(new W(s.value2,u(new x(new Dt(V.key,V.value,s.value3,s.value4,s.value5,s.value6),o))(s.value0)))}if(un instanceof j){var V=i(s.value3);return p=!0,new m(new W(s.value5,u(new x(new $r(s.value0,s.value1,s.value2,V.key,V.value,s.value6),o))(s.value3)))}if(q instanceof U){_=new x(new Dt(s.value1,s.value2,s.value3,s.value4,s.value5,s.value6),o),c=s.value0;return}if(q instanceof k&&un instanceof U){_=new x(new $r(s.value0,s.value1,s.value2,s.value4,s.value5,s.value6),o),c=s.value3;return}_=new x(new yt(s.value0,s.value1,s.value2,s.value3,s.value4,s.value5),o),c=s.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[s.constructor.name])}for(;!p;)y=d(_,c);return y}};return f(dn.value)}},$n={foldr:function(n){return function(r){return function(t){if(t instanceof T)return r;if(t instanceof L)return vn($n)(n)(n(t.value2)(vn($n)(n)(r)(t.value3)))(t.value0);if(t instanceof J)return vn($n)(n)(n(t.value2)(vn($n)(n)(n(t.value5)(vn($n)(n)(r)(t.value6)))(t.value3)))(t.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[t.constructor.name])}}},foldl:function(n){return function(r){return function(t){if(t instanceof T)return r;if(t instanceof L)return en($n)(n)(n(en($n)(n)(r)(t.value0))(t.value2))(t.value3);if(t instanceof J)return en($n)(n)(n(en($n)(n)(n(en($n)(n)(r)(t.value0))(t.value2))(t.value3))(t.value5))(t.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[t.constructor.name])}}},foldMap:function(n){var r=pn(n),t=I(n.Semigroup0());return function(e){return function(a){if(a instanceof T)return r;if(a instanceof L)return t(Tn($n)(n)(e)(a.value0))(t(e(a.value2))(Tn($n)(n)(e)(a.value3)));if(a instanceof J)return t(Tn($n)(n)(e)(a.value0))(t(e(a.value2))(t(Tn($n)(n)(e)(a.value3))(t(e(a.value5))(Tn($n)(n)(e)(a.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[a.constructor.name])}}}},qn={foldrWithIndex:function(n){return function(r){return function(t){if(t instanceof T)return r;if(t instanceof L)return Ir(qn)(n)(n(t.value1)(t.value2)(Ir(qn)(n)(r)(t.value3)))(t.value0);if(t instanceof J)return Ir(qn)(n)(n(t.value1)(t.value2)(Ir(qn)(n)(n(t.value4)(t.value5)(Ir(qn)(n)(r)(t.value6)))(t.value3)))(t.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 147, column 26 - line 150, column 120): "+[t.constructor.name])}}},foldlWithIndex:function(n){return function(r){return function(t){if(t instanceof T)return r;if(t instanceof L)return kr(qn)(n)(n(t.value1)(kr(qn)(n)(r)(t.value0))(t.value2))(t.value3);if(t instanceof J)return kr(qn)(n)(n(t.value4)(kr(qn)(n)(n(t.value1)(kr(qn)(n)(r)(t.value0))(t.value2))(t.value3))(t.value5))(t.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 151, column 26 - line 154, column 120): "+[t.constructor.name])}}},foldMapWithIndex:function(n){var r=pn(n),t=I(n.Semigroup0());return function(e){return function(a){if(a instanceof T)return r;if(a instanceof L)return t(jr(qn)(n)(e)(a.value0))(t(e(a.value1)(a.value2))(jr(qn)(n)(e)(a.value3)));if(a instanceof J)return t(jr(qn)(n)(e)(a.value0))(t(e(a.value1)(a.value2))(t(jr(qn)(n)(e)(a.value3))(t(e(a.value4)(a.value5))(jr(qn)(n)(e)(a.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 155, column 26 - line 158, column 128): "+[a.constructor.name])}}},Foldable0:function(){return $n}},RD=Ir(qn);var Ul=function(){return RD(function(n){return function(r){return function(t){return new x(n,t)}}})(dn.value)}();var Wt=function(){return T.value}(),ao=function(n){var r=De(n);return function(t){return en(t)(function(e){return function(a){return r(a.value0)(a.value1)(e)}})(Wt)}};var ea=function(n){var r=Bl(n);return function(t){return function(e){return Fn(e)(Rn)(r(t)(e))}}};var kl=v(Xe),jl=Fr(),BD=de(ta),zl=eo(ta),Jl=ea(ta),UD=v(Ke),zD=Be(),JD=ao(ta)(Sn),oo=h(ar(_n));var Gl=Q(Ze(_n)),GD=function(){function n(){}return n.value=new n,n}(),kD=function(){function n(){}return n.value=new n,n}(),jD=function(){function n(){}return n.value=new n,n}(),VD=function(){function n(){}return n.value=new n,n}(),QD=function(){function n(){}return n.value=new n,n}(),Vl=function(){function n(){}return n.value=new n,n}(),HD=function(){function n(){}return n.value=new n,n}(),KD=function(){function n(){}return n.value=new n,n}(),YD=function(){function n(){}return n.value=new n,n}(),XD=function(){function n(r){this.value0=r}return n.create=function(r){return new n(r)},n}(),ZD=function(){function n(r){this.value0=r}return n.create=function(r){return new n(r)},n}();var ny=function(n){return kl(function(r){var t=function(){var e=Ar(jl(r));return e==="string"?GD.value:e==="meaeure"?kD.value:e==="bollean"?jD.value:e==="interval"?VD.value:e==="entity_domain"?QD.value:e==="entity_set"?Vl.value:e==="role"?HD.value:e==="composite"?KD.value:e==="time"?YD.value:new XD(r)}();return t})(xu(n))},ry=function(n){return function(r){return BD(ro(n))(r)}},Ou=function(n){return jl(n.value0.conceptId)},Ql=function(n){return function(r){var t=function(i){var f=ro("concept_type"),l=zl(f)(i),c=function(){if(l instanceof D)return"";if(l instanceof m)return l.value0;throw new Error("Failed pattern match at Data.DDF.Concept (line 175, column 13 - line 177, column 20): "+[l.constructor.name])}(),_=ro("concept"),p=Jl(_)(Jl(f)(i)),y=zl(_)(i),d=function(){if(y instanceof D)return"";if(y instanceof m)return y.value0;throw new Error("Failed pattern match at Data.DDF.Concept (line 169, column 14 - line 171, column 20): "+[y.constructor.name])}();return{conceptId:d,conceptType:c,props:p}},e=ue(UD(zD)(n)),a=function(i){return JD(Gr(e)(i))},u=cu(n)!==Ln(r);return u?yn(["Bad csv row"]):oo(t(a(r)))}};var ty=function(n){return function(r){return function(t){return new ZD({conceptId:n,conceptType:r,props:t})}}},ey=function(n){if(n.value0.conceptType instanceof Vl){var r=ry("domain")(n.value0.props);return r?oo(n):yn(["missing domain field for entity_set: "+Ar(Ou(n))])}return oo(n)},Hl=function(n){var r=du(n.conceptId)||du(n.conceptType);if(r)return yn(["concept or concept_type field is empty."]);var t=ny(n.conceptType),e=xu(n.conceptId);return Yr(Gl(Gl(kl(ty)(e))(t))(oo(n.props)))(ey)};import ht from"path";var ay=ht.normalize;function oa(n){return ht.join.apply(this,n)}var Pu=ht.basename;var oy=ht.extname,uy=ht.sep,iy=ht.delimiter,fy=ht.parse,cy=ht.isAbsolute;var qr=S(Qn),ir=at(ot)(Qn),gt=Dn(vr),Bt=h(rr),Bu=gl(Sn),Yl=v(su),Wu=hn(dr),ly=h(ar(_n)),uo=function(){function n(){}return n.value=new n,n}(),ua=function(){function n(r){this.value0=r}return n.create=function(r){return new n(r)},n}(),Xl=function(){function n(r){this.value0=r}return n.create=function(r){return new n(r)},n}();var sy=function(){function n(r,t,e){this.value0=r,this.value1=t,this.value2=e}return n.create=function(r){return function(t){return function(e){return new n(r,t,e)}}},n}();var _y=qr(ur)(function(n){return ir(gt(Gn("-")))(function(){return qr(ur)(function(r){return Bt(new W(n,new m(r)))})})}),py=qr(ur)(function(n){return Bt(new W(n,D.value))}),my=Bu([or(_y),or(py)]),vy=function(n){return n.value1 instanceof ua},dy=function(n){return n.value1 instanceof Xl},Dy=function(n){return n.value1 instanceof uo},yy=za(".csv"),Uu=function(n){return n==="concepts"?fr(Dy):n==="entities"?fr(vy):n==="datapoints"?fr(dy):function(r){return[]}},ia=function(n){return n.value0},zu=gt(Gn("ddf--")),hy=ir(zu)(function(){return ir(gt(Gn("entities--")))(function(){return qr(ur)(function(n){return ir(Xr)(function(){return Bt(new ua({domain:n,set:D.value}))})})})}),gy=ir(zu)(function(){return ir(gt(Gn("entities--")))(function(){return qr(ur)(function(n){return ir(gt(Gn("--")))(function(){return qr(ur)(function(r){return ir(Xr)(function(){return Bt(new ua({domain:n,set:new m(r)}))})})})})})}),by=Bu([or(gy),or(hy)]),wy=ir(zu)(function(){return ir(gt(Gn("datapoints--")))(function(){return qr(ur)(function(n){return ir(gt(Gn("--by--")))(function(){return qr(wl(my)(Gn("--")))(function(r){var t=Yl(er)(r),e=Yl(Rn)(r);return Bt(new Xl({indicator:n,pkeys:t,constrains:e}))})})})})}),Ey=qr(Gn("ddf--concepts--"))(function(n){return qr(Wu(Gn("discrete"))(Gn("continuous")))(function(r){return ir(gt(Xr))(function(){return Bt(n+r)})})}),Cy=Ce(Nr)(Gn("ddf--concepts"))(Xr),Ty=function(){return Et(Nr)(Bu([or(Cy),or(Ey)]))(Bt(uo.value))}(),Zl=function(n){var r=yy(Pu(n));if(r instanceof D)return yn([n+" is not a csv file"]);if(r instanceof m){var t=Wu(Ty)(Wu(by)(wy)),e=pe(t)(r.value0);if(e instanceof F)return ly(new sy(n,e.value0,r.value0));if(e instanceof b)return yn([n+(" is not correct ddf file: "+e.value0.error)]);throw new Error("Failed pattern match at Data.DDF.FileInfo (line 175, column 7 - line 177, column 88): "+[e.constructor.name])}throw new Error("Failed pattern match at Data.DDF.FileInfo (line 169, column 23 - line 177, column 88): "+[r.constructor.name])};var ye=function(n){return n.throwError};var fo=function(n){return n.state};var Ju=function(n){var r=fo(n);return function(t){return r(function(e){return new W(void 0,t(e))})}};var Py=v(Er);var fs=function(n){return n};var cs=function(n){return n};var Gu={lift:function(n){var r=S(n.Bind1()),t=h(n.Applicative0());return function(e){return r(e)(function(a){return t(new F(a))})}}},Ry=Dr(Gu),ls=function(n){return function(r){return n(r)}},ku=function(n){var r=v(n);return{map:function(t){return ls(r(Py(t)))}}};var fa=function(n){return{Applicative0:function(){return co(n)},Bind1:function(){return ju(n)}}},ju=function(n){var r=S(n.Bind1()),t=h(n.Applicative0());return{bind:function(e){return function(a){return r(e)(jt(function(u){return t(b.create(u))})(function(u){var i=a(u);return i}))}},Apply0:function(){return Vu(n)}}},Vu=function(n){var r=ku(n.Bind1().Apply0().Functor0());return{apply:it(fa(n)),Functor0:function(){return r}}},co=function(n){return{pure:function(){var r=h(n.Applicative0());return function(t){return fs(r(F.create(t)))}}(),Apply0:function(){return Vu(n)}}};var ss=function(n){var r=n.Monad0(),t=Ry(r),e=fo(n),a=fa(r);return{state:function(u){return t(e(u))},Monad0:function(){return a}}};var Qu=function(n){var r=fa(n);return{throwError:function(){var t=h(n.Applicative0());return function(e){return fs(t(b.create(e)))}}(),Monad0:function(){return r}}};var ps=function(n){return n};var ms={lift:function(n){var r=S(n.Bind1()),t=h(n.Applicative0());return function(e){return function(a){return r(e)(function(u){return t(new W(u,a))})}}}};var Hu=function(n){var r=v(n);return{map:function(t){return function(e){return function(a){return r(function(u){return new W(t(u.value0),u.value1)})(e(a))}}}}};var bt=function(n){return{Applicative0:function(){return By(n)},Bind1:function(){return Wy(n)}}},Wy=function(n){var r=S(n.Bind1());return{bind:function(t){return function(e){return function(a){return r(t(a))(function(u){var i=e(u.value0);return i(u.value1)})}}},Apply0:function(){return vs(n)}}},vs=function(n){var r=Hu(n.Bind1().Apply0().Functor0());return{apply:it(bt(n)),Functor0:function(){return r}}},By=function(n){var r=h(n.Applicative0());return{pure:function(t){return function(e){return r(new W(t,e))}},Apply0:function(){return vs(n)}}};var ds=function(n){var r=h(n.Applicative0()),t=bt(n);return{state:function(e){return function(a){return r(e(a))}},Monad0:function(){return t}}};var zy=Dr(Gu),Jy=Dr(ms),Gy=function(n){return n},ca=function(n){var r=Ju(ss(ds(n)));return function(t){var e=I(t.Semigroup0());return function(a){return r(function(u){return e(u)(a)})}}},Ds=function(n){var r=ye(Qu(bt(n)));return function(t){return r(t)}},ys=function(n){var r=S(n.Bind1()),t=h(n.Applicative0());return function(e){var a=pn(e),u=I(e.Semigroup0());return function(i){return r(ps(cs(i))(a))(function(f){return t(function(){if(f.value0 instanceof b)return new W(u(f.value0.value0)(f.value1),D.value);if(f.value0 instanceof F)return new W(f.value1,new m(f.value0.value0));throw new Error("Failed pattern match at Data.DDF.Validation.ValidationT (line 46, column 7 - line 48, column 43): "+[f.value0.constructor.name])}())})}}};var hs={lift:function(n){var r=zy(bt(n)),t=Jy(n);return function(e){return Gy(r(t(e)))}}},Ku=function(n){return fa(bt(n))},gs=function(n){return ku(Hu(n))},he=function(n){return ju(bt(n))};var ge=function(n){return co(bt(n))};var nh=en(Qr);var rh=function(n){return Ul(n)};var th=function(n){return qu(n)},eh=function(n){var r=De(n);return function(t){return function(e){return r(t)(void 0)(e)}}};var ah=Wt,ws=function(n){var r=en(n);return function(t){var e=eh(t);return r(function(a){return function(u){return e(u)(a)}})(ah)}};var oh=function(n){var r=ea(n);return function(t){return function(e){return r(t)(e)}}},uh=function(n){var r=oh(n);return function(t){return function(e){return nh(cn(r))(t)(rh(e))}}},Es=function(n){var r=uh(n);return function(t){return function(e){return th(r(t)(e))}}};function Ts(n,r){return r.startsWith(n)}var Fs=function(n){return function(r){return Ts(n,r)}};var As=ee(pc),lh=Qe(hr),xs=ar(_n),nt=h(xs),Ns=g(st(Vn)),sh=ha(wr),_h=v(on),Yu=S(Qn),$s=h(rr),ph=I(Du),mh=at(ot),vh=mh(Qn),dh=Dn(vr),Dh=g(Un);var Xu=v(Ke),qs=zr(_c)(xs),yh=g(st(Ga)),Ss=Q(Ze(_n)),Ms=v(Xe);var hh=function(){function n(r){this.value0=r}return n.create=function(r){return new n(r)},n}(),gh=function(n){return function(r){var t=function(u){return function(i){return!!(u&&!i||!u&&i)}},e=As(r.headers),a=Yf(function(u){return function(i){return t(lh(u)(e))(i)}})(!1)(n);return a?nt(r):yn(["file MUST have one and only one of follwoing field: "+Ns(n)])}},Is=function(n){var r=sh(_h(fu)(n.headers));if(r instanceof D)return yn(["no headers"]);if(r instanceof m){if(n.rows instanceof D)return nt({headers:r.value0,rows:[]});if(n.rows instanceof m)return nt({headers:r.value0,rows:n.rows.value0});throw new Error("Failed pattern match at Data.DDF.CsvFile (line 129, column 14 - line 131, column 48): "+[n.rows.constructor.name])}throw new Error("Failed pattern match at Data.DDF.CsvFile (line 127, column 21 - line 131, column 48): "+[r.constructor.name])};var Ls=function(n){return function(r){return new hh({fileInfo:n,csvContent:r})}};var bh=Yu(Gn("is--"))(function(n){return Yu(ur)(function(r){return $s(ph(n)(r))})}),wh=Fr(),Eh=Yu(hn(dr)(bh)(ur))(function(n){return vh(dh(Xr))(function(){return $s(n)})}),Os=function(n){var r=pe(Eh)(n);if(r instanceof F)return nt(r.value0);if(r instanceof b){var t=Dh(r.value0.pos),e="invalid header: "+(n+(", "+(r.value0.error+("at pos "+t))));return yn([e])}throw new Error("Failed pattern match at Data.DDF.CsvFile (line 63, column 17 - line 71, column 20): "+[r.constructor.name])},Ch=function(n){var r=ws(n);return function(t){var e=r(t),a=Es(t);return function(u){return function(i){return function(f){var l=e(i),c=e(f);return a(l)(c)}}}}},Th=Ch(Sn)(Gt)(hr),Fh=function(n){return function(r){var t=As(r.headers),e=Th(n)(t);return e?nt(r):yn(["file MUST have following field: "+Ns(n)])}},Ps=function(n){return n.value0.fileInfo},Rs=function(n){return n.value0.csvContent};var Sh=function(n){var r=qs(Xu(Os)(n.headers)),t=pr(r);if(t instanceof F){var e=Xu(wh)(t.value0),a=gc(function(){var u=Fs("is--");return function(i){return u(Ar(i))}}())(e);return a.length===0?nt({headers:t.value0,rows:n.rows}):yn(["these headers are not valid Ids: "+yh(a)])}if(t instanceof b)return yn(t.value0);throw new Error("Failed pattern match at Data.DDF.CsvFile (line 139, column 5 - line 149, column 32): "+[t.constructor.name])},Mh=function(n){var r=qs(Xu(Os)(n.headers)),t=pr(r);if(t instanceof F)return nt({headers:t.value0,rows:n.rows});if(t instanceof b)return yn(t.value0);throw new Error("Failed pattern match at Data.DDF.CsvFile (line 157, column 5 - line 159, column 32): "+[t.constructor.name])},Ws=function(n){return function(r){if(n.value1 instanceof uo){var t=["concept","concept_type"],e=Yr(Yr(Is(r))(Fh(t)))(Sh);return Ss(Ms(Ls)(nt(n)))(e)}if(n.value1 instanceof ua){var t=function(){if(n.value1.value0.set instanceof m)return[Ar(n.value1.value0.set.value0),Ar(n.value1.value0.domain)];if(n.value1.value0.set instanceof D)return[Ar(n.value1.value0.domain)];throw new Error("Failed pattern match at Data.DDF.CsvFile (line 224, column 18 - line 226, column 39): "+[n.value1.value0.set.constructor.name])}(),e=Yr(Yr(Is(r))(gh(t)))(Mh);return Ss(Ms(Ls)(nt(n)))(e)}return yn(["not implemented"])}};var xh=de(ce),Nh=De(ce),$h=h(ar(_n)),Bs=function(){function n(r){this.value0=r}return n.create=function(r){return new n(r)},n}();var Us=function(){return new Bs({concepts:Wt})}();var zs=function(n){return function(r){var t=Ou(n),e=xh(t)(r.value0.concepts);if(e)return yn(["concept "+(Ar(t)+" existed in dataset")]);if(!e){var a=Nh(t)(n)(r.value0.concepts),u=new Bs({concepts:a});return $h(u)}throw new Error("Failed pattern match at Data.DDF.DataSet (line 51, column 32 - line 57, column 50): "+[e.constructor.name])}};var Zu=function(n){return function(r){return{message:r.message,file:r.file,lineNo:n,suggestions:r.suggestions}}},be=function(n){return function(r){return{message:r.message,file:n,lineNo:r.lineNo,suggestions:r.suggestions}}};var wt=function(n){return{message:n,file:"",lineNo:0,suggestions:""}};import{renameSync as Rh,truncateSync as Wh,chownSync as Bh,chmodSync as Uh,statSync as Js,lstatSync as zh,linkSync as Jh,symlinkSync as Gh,readlinkSync as kh,realpathSync as jh,unlinkSync as Vh,rmdirSync as Qh,rmSync as Hh,mkdirSync as Kh,readdirSync as Gs,utimesSync as Yh,readFileSync as Xh,writeFileSync as Zh,appendFileSync as ng,existsSync as ks,openSync as rg,readSync as tg,writeSync as eg,fsyncSync as ag,closeSync as og}from"fs";var _o=Tr;function _i(n,r){return r[n]()}var m_=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};var v_=function(){function n(r){this.value0=r}return n.create=function(r){return new n(r)},n}();var d_=function(n){return _i("isFile",n.value0)};var D_=function(n){return _i("isDirectory",n.value0)};var p0=v(lr);var pi=function(n){return p0(v_.create)(_o(function(r){return Js(n)}))};var h_=function(n){return _o(function(r){return Gs(n)})};var g_=function(n){return _o(function(r){return ks(n)})};var m0=h(ar(_n));var w_=function(n){var r=function(e){if(e)return m0(n);if(!e)return yn(["no datapackage in this folder"]);throw new Error("Failed pattern match at Data.JSON.DataPackage (line 45, column 5 - line 45, column 23): "+[e.constructor.name])},t=oa([n,"datapackage.json"]);return function(){var a=g_(t)();return r(a)}};var Ut=function(n){return function(){console.log(n)}};import E_ from"process";function C_(n){return()=>n.slice()}function mi(n){return function(r){var t=[];for(var e in r)hasOwnProperty.call(r,e)&&t.push(n(e)(r[e]));return t}}var C0=Object.keys||mi(function(n){return function(){return n}});var T_=function(){return C_(E_.argv)}();var W0=Qe(hr),B0=v(Cn),F_=Yo(Wr),vi=v(lr),U0=Jn(Xn)(Wr),z0=I(_n);var di=function(n){return function(r){return function(){var e=h_(n)(),a=fr(function(c){return!W0(c)(r)})(e),u=B0(function(c){return oa([n,c])})(a),i=F_(function(c){return vi(d_)(pi(c))})(u)(),f=F_(function(c){return vi(D_)(pi(c))})(u)(),l=vi(Tt)(U0(function(c){return di(c)([])})(f))();return z0(i)(l)}}};var rt=v(Cn),po=at(ot),S_=g(Ie()()(St({reflectSymbol:function(){return"file"}})(St({reflectSymbol:function(){return"lineNo"}})(St({reflectSymbol:function(){return"message"}})(Le({reflectSymbol:function(){return"suggestions"}})(Vn))(Vn))(Un))(Vn))),G0=ys(Pn)(Ht),A_=he(Pn),sa=S(A_),Di=po(A_),x_=ge(Pn),yi=Ct(x_),M_=Ds(Pn),I_=Dr(hs)(Pn),k0=Ve(Ku(Pn)),j0=Dn(gs(lr)),V0=h(x_),Q0=function(n){return function(r){var t=he(r),e=ge(r),a=h(e),u=po(t),i=ca(r)(Ht);return S(t)(ko(e)(Xn)(n)(function(f){var l=pr(Zl(f));if(l instanceof F)return a([l.value0]);if(l instanceof b){var c=rt(function(){var _=be(f);return function(p){return _(wt(p))}}())(l.value0);return u(i(c))(function(){return a([])})}throw new Error("Failed pattern match at Main (line 50, column 11 - line 56, column 22): "+[l.constructor.name])}))(function(f){return a(Tt(f))})}},L_=function(n){return function(r){var t=he(r),e=ge(r),a=h(e),u=po(t),i=ca(r)(Ht);return S(t)(ko(e)(Xn)(n)(function(f){var l=ia(f.value0),c=pr(Ws(f.value0)(f.value1));if(c instanceof F)return a([c.value0]);if(c instanceof b){var _=rt(function(){var p=be(l);return function(y){return p(wt(y))}}())(c.value0);return u(i(_))(function(){return a([])})}throw new Error("Failed pattern match at Main (line 66, column 11 - line 72, column 22): "+[c.constructor.name])}))(function(f){return a(Tt(f))})}},H0=function(n){return function(r){return function(t){var e=po(he(t)),a=ca(t)(Ht),u=h(ge(t)),i=Rs(n),f=ia(Ps(n)),l=function(c){return function(_){return function(p){var y=Yr(Ql(c)(p.value1))(Hl),d=pr(y);if(d instanceof b){var o=rt(function(){var un=be(f),V=Zu(p.value0+1|0);return function(N){return un(V(wt(N)))}}())(d.value0);return e(a(o))(function(){return u(_)})}if(d instanceof F){var s=pr(zs(d.value0)(_));if(s instanceof b){var o=rt(function(){var V=be(f),N=Zu(p.value0+1|0);return function(q){return V(N(wt(q)))}}())(s.value0);return e(a(o))(function(){return u(_)})}if(s instanceof F)return u(s.value0);throw new Error("Failed pattern match at Main (line 92, column 11 - line 98, column 38): "+[s.constructor.name])}throw new Error("Failed pattern match at Main (line 85, column 7 - line 98, column 38): "+[d.constructor.name])}}};return Ve(Ku(t))(function(c){return function(_){return l(i.headers)(c)(_)}})(r)(i.rows)}}},K0=function(n){return function(){var t=w_(n)(),e=pr(t);if(e instanceof b){var a=rt(function(){var f=be(n);return function(l){return f(wt(l))}}())(e.value0);return Ut($t(`
`)(rt(S_)(a)))()}if(e instanceof F){var u=di(n)([".git","etl","lang","assets"])(),i=G0(sa(Q0(u)(Pn))(function(f){return Di(yi(Ln(f)===0)(M_([wt("No csv files in this folder. Please begin with a ddf--concepts.csv file.")])))(function(){var l=Uu("concepts")(f);return Di(yi(Ln(l)===0)(M_([wt("No concepts csv files in this folder. Dataset must at least have a ddf--concepts.csv file.")])))(function(){return sa(I_(eu(rt(ia)(l))))(function(c){var _=Gr(l)(c);return sa(L_(_)(Pn))(function(p){return sa(k0(function(y){return function(d){return H0(d)(y)(Pn)}})(Us)(p))(function(y){var d=Uu("entities")(f);return Di(yi(Ln(d)>0)(sa(I_(eu(rt(ia)(d))))(function(o){var s=Gr(d)(o);return j0(L_(s)(Pn))})))(function(){return V0(y)})})})})})})}))();return Ut($t(`
`)(rt(S_)(i.value0)))(),Ut("Done.")()}throw new Error("Failed pattern match at Main (line 105, column 3 - line 145, column 18): "+[e.constructor.name])}},z$=function(){var r=T_(),t=je(r)(2);if(t instanceof D)return Ut("please provide a file path")();if(t instanceof m)return K0(t.value0)();throw new Error("Failed pattern match at Main (line 152, column 3 - line 154, column 26): "+[t.constructor.name])};export{H0 as appendConceptCsv,z$ as main,L_ as parseCsvFiles,Q0 as parseFileInfos,K0 as runMain};
